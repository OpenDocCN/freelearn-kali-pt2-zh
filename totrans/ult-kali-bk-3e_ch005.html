<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xml:lang="en" lang="en">
<head>
<title>The Ultimate Kali Linux Book - Third Edition</title>
<link rel="stylesheet" type="text/css" href="../styles/stylesheet1.css"/>
<link rel="stylesheet" type="text/css" href="../styles/stylesheet2.css"/>
</head>
<body>
<div id="book-content">
<div id="sbo-rt-content"><section id="passive-reconnaissace" class="level1 pkt" data-number="5">
<h1 data-number="5">4 Passive Reconnaissace</h1>
<section id="join-our-book-community-on-discord-3" class="level2" data-number="5.1">
<h2 data-number="5.1">Join our book community on Discord</h2>
<p><a href="https://packt.link/SecNet">https://packt.link/SecNet</a><img src="../media/file119.png" alt="Qr code Description automatically generated" width="150" height="150"/>As an aspiring ethical hacker and penetration tester, it’s important to develop your skills and gain a solid understanding on how adversaries are able to efficiently discover and collect sensitive information about a targeted organization, and analyze the collected data to create meaningful information that can be leveraged in planning a future cyber-attack on the target. As with many aspiring ethical hackers, we are always excited to get started with hacking into systems and networks as it’s the fun part of learning offensive security tactics and techniques. However, it’s important to develop the mindset of an adversary to better understanding why and how a real threat actor will plan their attack on a targeted system, network or organization.Adversaries use various reconnaissance techniques and procedures to find and collect data about their targets to better understand whether the targeted systems are online, whether any security vulnerabilities exists on them, and which attack vectors and infrastructure are available for delivering malicious payloads to the target. The more information that’s known about the target can improve how the plan of attack by the adversary.In this chapter, you will learn how reconnaissance techniques are used by threat actors and ethical hackers to discover, collect and analyze sensitive data that’s leaked by the targeted organization, and how such data can lead to a future cyber-attack. In addition, you will learn how to conceal your identity as an ethical hacker and penetration tester, and anonymize your internet-based traffic to improve your stealth and reduce your threat level.In this chapter, we will cover the following topics:</p>
<ul>
<li>Importance of reconnaissance</li>
<li>Exploring passive reconnaissance</li>
<li>Creating a sock puppet</li>
<li>Anonymizing internet-based traffic</li>
</ul>
<p>Let’s dive in!</p>
</section>
<section id="technical-requirements-2" class="level2" data-number="5.2">
<h2 data-number="5.2">Technical Requirements</h2>
<p>To follow along with the exercises in this chapter, please ensure that you have met the following hardware and software requirements:</p>
<ul>
<li>Kali Linux - <a href="https://www.kali.org/get-kali/">https://www.kali.org/get-kali/</a></li>
</ul>
</section>
<section id="importance-of-reconnaissance" class="level2" data-number="5.3">
<h2 data-number="5.3">Importance of reconnaissance</h2>
<p>Reconnaissance focuses on collecting as much data as possible on a target, then analyzing the collected data to create meaningful information that can be leveraged by an adversary or threat actor to identify the attack surface and security vulnerabilities on a targeted system, network or organization. Adversaries uses various reconnaissance techniques and tools to collect system information, networking information and organizational information about their targets. Without first understanding your target and their weaknesses, it’ll be challenging to create a weapon such as an <em>exploit</em> that will be effective in compromise the confidentiality, integrity and/or availability of the targeted system, network or organization.System information provides valuable insights to ethical hackers as it lets us know what’s running on the targeted system, such as it host operating system and version. The operating system and version information helps ethical hackers to research known security vulnerabilities and develop/acquire exploits that has the potential to compromise the target. For instance, many organizations around the world does not always run the latest version of operating systems within their network infrastructure While operating system vendors are continuously working on a newer version and releasing security updates to customers, not everyone installs the latest security patches/updates or even upgrade to the latest version for many reasons. This situation creates many possibilities for adversaries, ethical hackers and penetration testers. Imagine you’re performing an internal network penetration test on a targeted organization and have discovered their servers are running an older version of Microsoft Windows Server, and after some research, you’ve discovered all the servers contains the <em>EternalBlue</em> and <em>PrintNightmare</em> critical security vulnerabilities. If a real adversary were to discover these vulnerabilities, you can imagine the potential impact and damages that can be done.System information includes the following details:</p>
<ul>
<li>Identifying live hosts on a network</li>
<li>Hostnames of devices</li>
<li>Operating system type and version</li>
<li>Running services and versions</li>
<li>Open service ports</li>
<li>Unauthenticated network shares</li>
<li>Username and passwords</li>
</ul>
<p>Network information helps ethical hackers and penetration testers to identify whether the targeted organization is using any unsecure protocols, running vulnerable services and has any unintentional exposed service ports on critical systems. For instance, unsecure network protocols does not encrypt any data before or after transmission, therefore, an ethical hacker can intercept network traffic with the intent to capture any sensitive data such as user credentials and password hashes which can be leveraged for gain unauthorized access to critical systems on the network.Network information includes the following details:</p>
<ul>
<li><strong>Domain Name System</strong> (<strong>DNS</strong>) records</li>
<li>Domain names</li>
<li>Sub-domain names</li>
<li>Firewall rules and policies</li>
<li>IP addresses and network blocks</li>
<li>Network protocols and services</li>
</ul>
<p>Organizational information helps ethical hackers to identify the employees of a targeted organization, their contact information such as telephone numbers and email address which can be used for various social engineering attacks such as phishing. In addition, identifying high-profile employees of an organizations helps the ethical hacker to focus their phishing emails to targeted persons with high-privileged user accounts.Organizational information includes the following details:</p>
<ul>
<li>Employees’ details and contact information</li>
<li>Geo-location of the organizations and its remote offices</li>
<li>Employees’ role and profile</li>
</ul>
<p>The first stage of Lockheed Martin’s <strong>Cyber Kill Chain</strong> is reconnaissance, which describes how the threat actor uses this phase of attack to plan their operations such as performing extensive research on their targets to gain a better understanding of their security vulnerabilities and determine how the threat actor can meet their objectives/goals of the cyber-attack. In addition, the <strong>MITRE ATT&amp;CK</strong> framework listed reconnaissance as the first stage on their Enterprise Matrix and describe it as the techniques used by an attacker to either passively or actively collect information about a target, where such collecting organizational, network and system information and employees’ data that can be leveraged in a future cyber-attack. Therefore, cybersecurity professionals such as ethical hackers and penetration testers uses the same reconnaissance techniques to efficiently collect and analyze data as a real attacker to compromise their targets. Hence, providing the ethical hacker and penetration tester with insights and <strong>Cyber Threat Intelligence</strong> (<strong>CTI</strong>) on how the targeted organization is leaking sensitive data about themselves, and how it can be leveraged by a real attacker when planning a future attack.Reconnaissance is usually broken-down into the following categories:</p>
<ul>
<li>Passive – Passive reconnaissance techniques are used to ensure the ethical hacker does not establish direct interaction with the target. This technique involves collecting and analyzing publicly available information from multiple data sources from the internet about target. Passive information gathering helps the ethical hacker to improve stealth and reduce the likelihood of alerting or triggering any security sensors that notifies the target.</li>
<li>Active – Active reconnaissance techniques establishes a direct connection or interaction with the target to collect sensitive information that’s not available through passive reconnaissance techniques. This technique involves sending specially-crafted probes over a network to the target to collect technical details such as operating system and running services.</li>
</ul>
<p>According to the MITRE ATT&amp;CK framework, the following are common reconnaissance techniques used by adversaries:</p>
<ul>
<li>Active reconnaissance – This technique focuses on sending probes to the targeted systems and networks to collect sensitive information such as identifying the target’s network block information and discovering security vulnerabilities on applications and operating systems.</li>
<li>Gather victim host information – This techniques helps the threat actor to collect information about the target’s hardware, software running on devices, firmware on device and system configurations.</li>
<li>Gather victim identity information – This technique is used by threat actors to collect users’ credentials, email addresses, employees’ name and contact information from public data sources and leaked data.</li>
<li>Gather victim network information – Threat actors uses this techniques to collect network-related information about their target’s network infrastructure such as domain registrar information, public DNS records, network topology details, IP addresses and network block details.</li>
<li>Gather victim org information – Malicious actors uses this technique to collect information about the target’s geo-location, the service providers to the target, days and time of business operations and identify key personnel of the organization.</li>
<li>Phishing for information – This technique is commonly used by malicious actors by sending phishing email messages to the targeted organization with the intention to trick victims into performing an action or revealing sensitive information that can be further leverage in a cyber-attack.</li>
<li>Searched closed sources – Searching closed data sources involves looking through subscription-based services that provide information about threat intelligence and data leaks that contains sensitive information about breached data from organization.</li>
<li>Search open technical databases – These open technical databases contains publicly available information about people, organizations, and domain names. Such information can be leveraged by a threat actor when planning a cyber-attack on a target.</li>
<li>Search open websites/domains – This technique involves searching social media platform, internet search engines and code repository websites for any publicly available information that can be used to identify security flaws and plan a cyber-attack on the target.</li>
<li>Search victim-owned websites – Visiting the targeted owned-website may contain useful information such as contact details of employees, telephone numbers, email addresses, and identify high-profile employees and their roles. Such information can be leverage for spear-phishing attack campaigns.</li>
</ul>
<blockquote>
<p>The information collected during the reconnaissance phases helps the threat actor, ethical hacker and penetration tester to move onto the exploitation phases to gain access to a targeted system or network.</p>
</blockquote>
<p>Reconnaissance is commonly referred to as <em>footprinting</em>, which is to obtain specific information about the targeted organization from an attacker’s perspective. The information that's collected can be used in various ways to gain access to the targeted system, network, or organization. Footprinting allows an ethical hacker and penetration tester to better understand the security posture of the targeted infrastructure, quickly identify security vulnerabilities on the targeted systems and networks, create a network map of the organization, and reduce the area of focus to the specific IP addresses, domain names, and the types of devices regarding which information is required. Footprinting is part of the reconnaissance phase; however, since footprinting can provide more specific details about the target, we can consider footprinting to be a subset of the reconnaissance phase.The following diagram shows how linkage between information gathering, reconnaissance, and footprinting:</p>
<img src="../media/file120.png" width="588" height="273"/>
<p>As an aspiring ethical hacker and penetration tester, using the same <strong>Tactics, Techniques and Procedures</strong> (<strong>TTPs</strong>) for reconnaissance helps you to better understand how a real attacker is able to identify the attack surface of a targeted organization, collect and analyze publicly available data to identify security vulnerabilities and leverage the collected data to improve their plan of attack on the target. By using the same reconnaissance TTPs as real adversaries, you will be able to better simulate a real-world cyber-attack on your target and gain the insights needed to provide recommendations on improving the cyber defenses, reducing the attack surface and improve the security posture of the organization.</p>
</section>
<section id="exploring-passive-reconnaissance" class="level2" data-number="5.4">
<h2 data-number="5.4">Exploring Passive reconnaissance</h2>
<p>Passive reconnaissance focuses on collecting information without directly connecting or interacting with the target. This method reduces the threat level of the ethical hacker and penetration tester, whereby reducing the likelihood of triggering any alerts which notifies the target that someone is collecting information about them, their systems and network infrastructure.Each day, more data is being uploaded and created on the internet by people around the world. Whether someone is uploading a picture of themselves, a fun marketing video or even information about new products and services for new and existing customers, the internet is storing lots of data which can be harvested and carefully analyzed by cyber criminals to better understand their targets and improve their cyber operations. As previously mentioned, ethical hackers and penetration testers uses the same TTPs as real threat actors as a method to efficiently discover how organization are leaking data about themselves and how malicious actors are able to leverage the collected data to identify and compromise security vulnerabilities within their targets.For instance, internet search engines are designed to index (crawl) and analyze each webpage found on the internet to improve their search results and provides users with more accurate information, helping a user to easily find the hostname of a web server or the <strong>Uniform Resource Locator</strong> (<strong>URL</strong>) to a resource on the internet. Adversaries and ethical hackers also use various internet search engines to discover unintentionally exposed systems, unsecure web portals and resources which are owned by the targeted organization.The following are common internet search engines used by ethical hackers:</p>
<ul>
<li>Google - <a href="https://www.google.com/">https://www.google.com/</a></li>
<li>Yahoo! - <a href="https://www.yahoo.com/">https://www.yahoo.com/</a></li>
<li>Bing - <a href="https://www.bing.com/">https://www.bing.com/</a></li>
<li>DuckDuckGo - <a href="https://duckduckgo.com/">https://duckduckgo.com/</a></li>
<li>Yandex - <a href="https://yandex.com/">https://yandex.com/</a></li>
</ul>
<blockquote>
<p>The Yandex internet search engine is Russian-based and provides better search results for resources within the Asia and Europe regions. DuckDuckGo is a privacy-focused internet search engine which does not store the user’s searches or tracking details.</p>
</blockquote>
<p>As an aspiring ethical hacker, it’s recommended to use at least two different internet search engines when performing research on your target. For instance, one internet search engine may provide better results that’s aligned towards your target, while another internet search engine may provide less sensitive results. However, it’s important to collect all the information during the reconnaissance phase, then analyze the collected data to determine what is useful and helps you build a profile of your target. To get a better understanding on how adversaries, ethical hackers and penetration testers uses passive reconnaissance to identify sensitive information and security vulnerabilities on targets, let’s take a deep dive into exploring open source intelligence.</p>
<section id="open-source-intelligence" class="level3" data-number="5.4.1">
<h3 data-number="5.4.1">Open source intelligence</h3>
<p><strong>Open Source Intelligence</strong> (<strong>OSINT</strong>) is commonly referred to as the collection and analysis of publicly available information from multiple data sources to better understand the attack surface such as the security vulnerabilities on a targeted organization. In addition, OSINT helps ethical hackers and penetration testers to identify how their targets are leaking sensitive data which can be leveraged by threat actors to improve their cyber-attacks and threats.As more organizations are creating an online presence on the internet, from spinning up virtual servers to hosting their web applications on cloud computing service providers’ infrastructure, many companies are using social media platforms to create awareness and share information with new and existing customers. While social media platforms enables people around the world to share updates, pictures and videos to each other using a digital medium, sometimes people leak sensitive information about themselves or their organizations without realizing the potential risk if the information were to be leveraged by a cyber-criminal. For instance, an employee shares a digital photograph of themselves while at their workstation, however the background of the image shows some confidential documents on their desk, their employee’s ID badge and some applications on their computer’s monitor. If a threat actor is targeting the company, the attacker will use passive reconnaissance to identify the social media presence of the targeted organization such as their LinkedIn, Facebook, Instagram and Twitter pages. Sometimes, organizations will post on social media about new job vacancies with the technical requirements for a potential candidate. Threat actors can leverage the technical details found within a job post to determine the technologies and applications that are running within the organization’s network.Furthermore, the threat actor can identify the social media accounts of past and present employees to determine if anyone has uploaded a picture with sensitive details. Social media platforms provides a lot of privacy features to their users, however, not everyone takes the extra times to ensure their online profiles are private and visible to online trusted contacts. If a threat actor is able to find an employee’s social media accounts with unsecure privacy settings and their pictures are all publicly available. The threat actor can simply looks for pictures that contains the employee’s ID badge which can be used to create a fake badge to gain unauthorized physical access to the compound, and even determine what applications are running on the employee’s computer. Identifying the applications on the targeted systems helps the threat actor to research security vulnerabilities for the operating system and applications on the computers.While there’s a lot of sensitive information which can be found on social media platforms, there are addition OSINT data sources, such as the following:</p>
<ul>
<li>Online forums – There are many online forums and discussions boards such as <strong>Stack Overflow</strong> (<a href="https://stackoverflow.com/">https://stackoverflow.com/</a>) which are commonly used by the tech community to help and share ideas with each other. However, technical employees may create a profile on a discussion forum and include their job title and company name. A threat actor can search for users’ profiles that are associated with the targeted organization, then the attacker can view all the posts and discussions made by the employees to identify any sensitive information that may be leaked. For instance, the employees may create a discussion post on requesting help for a specific application on their network and reveals the application version, error logs and host operating system for a server. The threat actor can leverage this information to research known security vulnerabilities for the application and operating system.</li>
<li>Search engines – Internet search engines crawl each web page and identify web servers on the internet. Threat actors can leverage the search algorithm and use customized search parameters on various internet search engines to find specific resources and sensitive URLs of targeted organizations. For instance, both threat actors and cybersecurity professionals can use <em>Google Dorking</em> techniques to perform advanced Google searches.</li>
<li>Public databases – There are many public databases on the internet which contains information about companies and their location, and people and their contact details. Threat actors can collect and analyze the information found on public databases to plan social engineering attacks on the employees of a targeted organization to gain a foothold into their network infrastructure.</li>
<li>Internet archive – The <strong>Internet Archive</strong> (<a href="https://archive.org/">https://archive.org/</a>) is an online, digital library which takes a snapshot of everything on internet and archives it for the next 20 years. Therefore, anything that’s posted on the internet is archived and it’s retrievable by anyone, including threat actors and ethical hackers. The Internet Archive helps threat actors identify legacy web applications and plugins on the targeted web server for any security vulnerabilities.</li>
<li>WHOIS databases – There are many WHOIS databases on the internet which stores registration details of public domain names. This type of database contains the domain registration and expiration date, the contact details and address of the person who registered the domain, and public DNS records. If a domain owner does not pay an additional fee to safeguard their <strong>Personally Identifiable Information</strong> (<strong>PII</strong>), a threat actor can use the owner’s personal information to plan future cyber operations such as social engineering attacks.</li>
<li>Public records – Around the world, there are many state-owned and government agencies that often store public records about their country’s property, citizens, business registration and so on. For instance, many of these agencies are acquiring an online presence on the internet, and threat actors can easily access the public records to identify the geo-location of targeted companies.</li>
<li>Code repositories – Many developers are using GitHub and other online code repositories to simultaneously work on new and existing applications for their organization. However, if a user does not apply proper privacy controls on their user account, a threat actor can easily view their online code projects to determine the applications that are running within the targeted organization and whether any security vulnerabilities exists within the code that can be exploited to gain a foothold on the network.</li>
<li>Geospatial data – This data source includes publicly available mapping and imagery systems which enables anyone on the internet to find physical places and identify the surroundings of an area. For instance, a threat actor can use <strong>Google Maps</strong> to determine the geolocation of a targeted organization, and its <strong>Street View</strong> feature identify whether there are any nearby carparks and physical access to the compound.</li>
</ul>
<p>Furthermore, organizations usually publish information about themselves on various internet platforms, such as blogs, social media platforms, and recruitment websites. As the internet is so readily available and accessible, it's quite easy for someone such as a threat actor or a penetration tester to gather information on a targeted organization simply by using search engines to determine their underlying infrastructure.Since adversaries leverages OSINT to improve their cyber-attacks and future operations, ethical hackers and penetration testers use the same TTPs to ensure they can efficiently discover how their targets are leaking sensitive data and how threat actors can leverage it to compromise their target’s systems and networks. In addition, ethical hackers will gain the insights and <strong>Cyber Threat Intelligence</strong> (<strong>CTI</strong>) needed to provide recommendations on how to help organizations reduce their data leakages and prevent future cyber-attacks and threats.The following diagram shows a visual mind-map for collecting OSINT from various online data sources:</p>
<img src="../media/file121.png" width="1089" height="384"/>
<p>As shown in the preceding diagram, there are many data sources which are commonly used by both adversaries and ethical hackers for different goals. Such that, threat actors’ goals are usually focused on compromising the confidentiality, integrity and/or availability of their targeted systems with malicious intentions. While ethical hackers and penetration testers uses the same techniques and skills with a good moral compass to help organizations identify hidden security vulnerabilities and implement countermeasures to prevent a real cyber-attack.</p>
<blockquote>
<p>Keep in mind, it’s important to validate the accuracy of the information collected from OSINT. Sometimes, an online data source may not provide the most up-to-date information about a target and this can lead to planning a cyber-attack or developing an exploit based on outdated information.</p>
</blockquote>
</section>
<section id="how-much-data-should-be-collected" class="level3" data-number="5.4.2">
<h3 data-number="5.4.2">How much data should be collected</h3>
<p>The more data collected should help you better understand the target, but how much data is enough? Before getting started with OSINT, ethical hackers and penetration testers need to understand what are the deliverables of the penetration test, whether the organization is interested in determining whether their company’s data is being intentionally and unintentionally leaked online, how will an attacker identify and exploit the security vulnerabilities on their systems, and what will be the impact if an adversary were to leverage OSINT about the organization to plan a cyber-attack.Once the ethical hacker determines the scope of the security assessment, the ethical hacker will proceed to <em>data collection and retrieval</em> of OSINT on the targeted organization. This means, the ethical hacker will use reconnaissance TTPs to collect multiple data types such as text, media and geo-spatial data from multiple data sources on the internet to create a profile about the target. During this phase, it’s important for both ethical hackers and penetration testers to identify relevant information that adds context to the target and when sufficient is collected. If insufficient data is collected, the ethical hacker will not have enough details to determine the type of security vulnerabilities on targeted systems, attack vectors for delivering malicious payloads, geo-location of the target, running services and applications on systems, and so on.After the data collection phase, the ethical hackers needs to carefully analyze the collected data to better understand how it applies to the targeted organization. During this phase, the ethical hacker may discover something that’s interesting and decides to go deeper by collecting more data for analysis. However, it’s important to monitor the amount of time spent during each phase of your penetration test, as you do want to spend most of your time on reconnaissance while forgetting about exploitation and post-exploitation phases. Therefore, be mindful when going down a rabbit-hole when researching your target.The <strong>Your OSINT Graphical Analyzer</strong> (<strong>YOGA</strong>) mind-map helps ethical hackers and penetration testers to better visualize how one data point can easily lead to another and displays the type of the information that can be collected from each data point, as shown below:</p>
<img src="../media/file122.png" width="1276" height="744"/>
<p>As shown in the preceding screenshot, if an ethical hacker uses the targeted domain name as a starting point, YOGA provides a map showing the next data points and sources for information gathering.</p>
<blockquote>
<p>To learn more about YOGA, please see: <a href="https://yoga.myosint.training/">https://yoga.myosint.training/</a>.</p>
</blockquote>
<p>The analyzed data is converted into meaningful information to determine the following:</p>
<ul>
<li>What is the accuracy of the collected data?</li>
<li>Was the data found from credible sources?</li>
<li>Is the collected data factual or is it subjective?</li>
<li>Was enough data collected to understand the target or more is needed?</li>
</ul>
<p>Next, the ethical hacker or penetration tester may attempt to collect more data but in a different area to better understand and improve the profile of the target. For instance, the ethical hacker may attempt to determine the organizational hierarchy of employees, and perform social media OSINT to identify all employees with a social media profile to investigate what type of information each person is leaking about the company. Discovering the social media accounts of employees can lead to discovering the IT professionals who are employed by the targeted organization, and identify whether they made any recent social media post about their technical work in the organizations.Once sufficient data is analyzed about the target, the ethical hacker and penetration tester creates intelligence that will assist in planning for the <em>weaponization</em>, <em>delivery</em> and <em>exploitation</em> phase to compromise the target. However, active reconnaissance techniques and procedures are needed to collect sensitive information that’s not available from OSINT. Having completed this section, you have learnt about the importance of passive information gathering and how OSINT can be leveraged by ethical hackers and penetration testers to identify security flaws on a targeted system, network and organization. In the next section, you will learn how to conceal your online identity as an aspiring ethical hacker.</p>
</section>
</section>
<section id="creating-a-sock-puppet" class="level2" data-number="5.5">
<h2 data-number="5.5">Creating a sock puppet</h2>
<p>There are many techniques and tools which are commonly used by ethical hackers and penetration testers to gather information about their target various sources on the internet. When using OSINT strategies and techniques, you’ll need to ensure you do not make direct contact with the targeted organization and that your real identity is not revealed during the process. A <strong>sock puppet</strong> is a terminology that's used within the cybersecurity industry, especially among penetration testers. A sock puppet is simply a misrepresentation of an individual, such as creating an entire fake identity or persona with the intent to infiltrate an online community to gather information. While pretending to be someone else is unlawful, hackers always create a fake identity on the internet when gathering information about their targets. By creating a fake persona on an online platform such as a social media website, no one knows the true identity of the account owner. Therefore, the hacker can pretend to be an employee or a mutual friend of their target to gather data about the organization.</p>
<blockquote>
<p>Never use personal accounts for work-related activities, such as OSINT operations, investigations, ethical hacking, or penetration testing.</p>
</blockquote>
<p>Penetration testers usually create a sock puppet to mask their true identity when performing any type of intelligence gathering about their targets. This technique is used to prevent the target, such as an organization or person, from determining the true identity of the penetration tester who is collecting data about them. If the organization hires a penetration tester to simulate a real-world cyber-attack, and the penetration tester is using their real online accounts to gather intelligence, their true identity may be revealed. Some social media platforms such as LinkedIn allow a user to see who has visited their profile recently. If the penetration tester uses their real account to investigate an employee's profile, this may trigger a red flag for the organization. Another key aspect of using a sock puppet is to ensure the target does not know who is performing the OSINT investigation. This is also a good practice for penetration testers to remain stealthy during a security assessment.When creating a sock puppet, ensure the profile looks very legitimate and believable to anyone who views it. The following are some resources for creating a sock puppet:</p>
<ul>
<li>Fake Name Generator - <a href="https://www.fakenamegenerator.com/">https://www.fakenamegenerator.com/</a></li>
<li>This Person Does Not Exist - <a href="https://www.thispersondoesnotexist.com/">https://www.thispersondoesnotexist.com/</a></li>
<li>Proxy credit card - <a href="https://privacy.com/">https://privacy.com/</a></li>
</ul>
<p>Rather than thinking about all the components needed to create a fake identity or persona, using a website such as <strong>Fake Name Generator</strong> enables you to select various characteristics and parameters, and the site will generate an entire fake identity within a few seconds. A profile without a picture is always a red flag, and using someone else's photo may work for a bit until someone discovers their friend's or relative's profile picture is being used on another account. Using a website such as <strong>This Person Does Not Exist</strong> is beneficial as it uses algorithms to generate pictures of people who do not exist in reality. However, keep in mind, there are various online tools that can be used to identify an AI-generated image.Sometimes, as a penetration tester, you'll need a <em>burner phone number</em> or some type of payment service to help with your penetration testing engagement. Using your own credit card on various sites can lead to revealing your true identity, such as purchasing a burner phone number to perform social engineering over the telephone. Using a website such as <strong>Privacy</strong> can act as a proxy for your credit card. The site works by storing your real credit card number, which then enables you to generate a unique proxy card number for each unique service or website you want to perform a transaction on. This prevents you from revealing your true identity through your credit card number on the e-commerce websites.The following are some guidelines when creating a sock puppet:</p>
<ul>
<li>Whenever you’re creating a social media account, ensure you do not use your real IP address. Considering using the free internet service at a local coffee shop.</li>
<li>When creating social media accounts, do not use <strong>Virtual Private Networks</strong> (<strong>VPNs</strong>) or <strong>The Onion Router</strong> (<strong>TOR</strong>) services as many social media platforms are able to detect your origin traffic is being proxy through a VPN or TOR, and will require additional identity verification during the account creation process.</li>
<li>Your sock puppet account should look like a normal person to avoid any red flags of being identified as a fake account.</li>
<li>Consider using burner email address when registering for online accounts. There are many free email services such as <strong>Proton Mail</strong> (<a href="https://proton.me/">https://proton.me/</a>) which provide additional layers of privacy. However, you can create a vanilla (basic) email address on Gmail, Outlook, and even Yahoo Mail.</li>
<li>After the sock puppet profile is created, ensure you frequently share updates, statuses, pictures, interact and connect with others on the platform.</li>
<li>Do not use another person’s picture as your sock puppet profile picture. Reverse image search can be used to identify whether a picture is fake or being misused online.</li>
</ul>
<p>Having completed this section, you have understood the fundamentals and importance of using a sock puppet when performing reconnaissance on a target. In the next section, you will learn how to anonymize your internet-based traffic.</p>
</section>
<section id="anonymizing-internet-based-traffic" class="level2" data-number="5.6">
<h2 data-number="5.6">Anonymizing internet-based traffic</h2>
<p>Ensuring your identity is kept a secret during a penetration test is important to prevent the target from knowing who is collecting information about them. However, during the reconnaissance phase of the Cyber Kill Chain, you may be using various tools to help automate the information-gathering process. These tools will be generating traffic and contain your source IP address within each packet that leaves your device.For instance, you’re performing a port scan on a targeted web server to identify open ports and running services. When the port scanner tool on your devices sends specially crafted packets (probes) to the targeted web server, each probe will contain your source IP address which can be used to identify your geolocation. The targeted web server will be generating log messages on each transaction it performs and will contain a record of all source IP addresses, including yours.The following are common techniques that are used by penetration testers to anonymize their traffic:</p>
<ul>
<li><strong>Virtual Private Network</strong> (<strong>VPN</strong>)</li>
<li><strong>Proxychains</strong></li>
<li><strong>The Onion Router</strong> (<strong>TOR</strong>)</li>
</ul>
<p>In the following sub-sections, you will discover the benefits of using each of these technologies as a penetration tester.</p>
<section id="virtual-private-network-vpn" class="level3" data-number="5.6.1">
<h3 data-number="5.6.1">Virtual Private Network (VPN)</h3>
<p>A VPN allows a user to securely send data across an unsecure network, such as the internet. Within the field of Information Technology (IT), security and networking professionals often implement VPNs to ensure their remote workers and offices can securely access the resources located at the corporate office over the internet. This type of VPN is referred to as a Remote Access VPN. Additionally, a Site-to-Site VPN can be used to establish a secure communication channel between branch offices across the internet without using a dedicated <strong>Wide Area Network</strong> (<strong>WAN</strong>) service from a telecommunications provider.Penetration testers can use a VPN service to ensure the network traffic that originates from their attacker system exists in a different geographic location. Let's imagine you need to use a tool to perform a scan on a target server on the internet but you do not want your target to know the actual source of the traffic. Using a VPN, where the VPN server is located in another country, can be beneficial to you. This means your network traffic will be securely routed through the VPN service provider's network and will only exit in the country of your destination VPN server. Therefore, you can have all your network traffic exit in the USA, Russia, and Brazil, and so on, masking and anonymizing your identity and origin. The following diagram shows a simple representation of using online VPN servers:</p>
<img src="../media/file123.png" alt="G:\.shortcut-targets-by-id\1CmOHjwHtAmAazfQWf4vwF3iXF6hLABBW\Packt Projects\09 - Reconnaissance for Ethical Hackers\Chapter 03\Diagrams\3.7.png" width="661" height="373"/>
<p>The following are some notable points to consider when using a VPN to anonymize your network traffic to the internet:</p>
<ul>
<li>Using a commercial VPN service provider requires a paid subscription.</li>
<li>Ensure your VPN service provider does not keep logs or sell users data to third party data brokers on the internet.</li>
<li>Ensure the VPN service providers allows unlimited or unmetered bandwidth for users.</li>
<li>Ensure the VPN service provider has support and a VPN client for your operating system.</li>
<li>You can host your own VPN server on a cloud service provider on the internet.</li>
<li>When using a VPN, ensure your DNS traffic is not leaking as it will reveal your geolocation. Consider using <strong>DNS Leak Test</strong> (<a href="https://www.dnsleaktest.com/">https://www.dnsleaktest.com/</a>) to verify whether your DNS messages are leaking outside your VPN tunnel.</li>
<li>When using a VPN, consider disabling IPv6 communication on your operating system.</li>
</ul>
<blockquote>
<p>OpenVPN enables anyone to host their own VPN access server as a self-hosting solution or on the cloud. The OpenVPN Access Server enables up to 2 devices for free. To learn more about OpenVPN Access Server, please see: <a href="https://openvpn.net/access-server/">https://openvpn.net/access-server/</a>.</p>
</blockquote>
<p>Before choosing a VPN service, cloud provider, or setting up a solution, ensure you do a lot of research and testing to determine which solution works best for you. Next, you will learn how to use Proxychains to anonymize your traffic to the internet.</p>
</section>
<section id="proxychains" class="level3" data-number="5.6.2">
<h3 data-number="5.6.2">Proxychains</h3>
<p>A proxy is a system such as a server that sits between a source and destination host on a network. If a sender wants to communicate with a destination server, the sender forwards the message to the proxy system, which is then forwarded to the destination server. The destination server will think the message is originating from the proxy system and not the actual source. Within the field of information technology, using proxy servers has many benefits. In the cybersecurity industry, it is commonly used to anonymize the origin of network traffic and to mask the real source IP address of an ethical hacker and penetration tester.Penetration testers use <strong>proxychains</strong>, which enables them to create a logical chain of connections between multiple proxy servers when sending traffic to a targeted system, network or the internet. Proxychains allow a penetration tester to configure various types of proxies, such as the following:</p>
<ul>
<li>HTTP</li>
<li>HTTPS</li>
<li>SOCKS4</li>
<li>SOCKS5</li>
</ul>
<p>Simply put, the traffic from the ethical hacker’s system will be sent to first proxy server within the chain, then to the next and so on until the last proxy server within the chain forwards the traffic to the destination (target) on the internet. Using Proxychains does not encrypt your traffic as compared to VPNs, but it does provide anonymity for your network traffic and prevents your real IP address from being exposed to the target.The following diagram shows the flow of traffic during the proxy chaining effect:</p>
<img src="../media/file124.png" alt="G:\.shortcut-targets-by-id\1CmOHjwHtAmAazfQWf4vwF3iXF6hLABBW\Packt Projects\09 - Reconnaissance for Ethical Hackers\Chapter 03\Diagrams\3.8.png" width="871" height="411"/>
<p>Where does a penetration tester obtain a list of proxy servers? This is a common question that's asked by many people. Simply put, you can set up your own proxy servers on the internet using various cloud service providers, such as Microsoft Azure and <strong>Amazon Web Services</strong> (<strong>AWS</strong>). Additionally, you can obtain proxy servers from paid services such as VPN service providers and perform a Google search, such as <em>free proxy server list</em>, to find freely available proxy servers.</p>
<blockquote>
<p>You can use a website such as <a href="https://spys.one/en/">https://spys.one/en/</a>, to obtain a list of free proxy servers. However, keep in mind that these servers may not always be online or available. Therefore, it’s recommended to use multiple proxy servers.</p>
</blockquote>
<p>To get started setting up proxychains, please use the following instructions:</p>
<ol>
<li>Open <strong>Oracle VM VirtualBox Manager</strong> and power-on the <strong>Kali Linux</strong> virtual machine.</li>
<li>Login to the <strong>Kali Linux</strong> virtual machine, then open the <strong>Terminal</strong> and use the following commands to update the local filename database and search for the <code>proxychains4</code> configuration file:</li>
</ol>
<div class="C1-ConsolePACKT">
<pre><code>kali@kali:~$ sudo updatedb
kali@kali:~$ locate proxychain</code></pre>
</div>
<p>The following screenshot shows the location of the proxychains4.conf file:</p>
<img src="../media/file125.png" width="571" height="278"/>
<ol>
<li>Next, either on your host operating system or Kali Linux, open the web browser and go to <a href="https://spys.one/en/">https://spys.one/en/</a> for a list of proxy servers. Ensure you choose a few proxy servers from the website.</li>
<li>After choosing a few proxy servers from the previous step, you will need to modify the <code>proxychains4.conf</code> file to use the proxy servers. Use the following command to open the <code>proxychains4.conf</code> file with the Nano command-line text editor:</li>
</ol>
<div class="C1-ConsolePACKT">
<pre><code>kali@kali:~$ sudo nano /etc/proxychains4.conf</code></pre>
</div>
<ol>
<li>Next, the contents of the <code>proxychains4.conf</code> file will appear on the Terminal, scroll-down using the directional keys on your keyboard to the line that contains <code>#dynamic_chain</code> and remove the <code>#</code> character from the start of the line. Then, insert a <code>#</code> character at the start of the <code>strict_chain</code>, as shown in the following screenshot:</li>
</ol>
<img src="../media/file126.png" width="979" height="588"/>
<p>As shown in the preceding screenshot, removing the <code>#</code> character at the start of a line within a configuration file in Linux will uncomment the line of code and will allow the operating system to execute the line of commands. Therefore, uncommenting <code>dynamic_chain</code>, the proxychains application will chain all the proxy servers within a predefined list. By commenting <code>strict_chain</code>, proxychains will not use this method of proxy.</p>
<ol>
<li>Next, scroll-down to the end of the <code>proxychains4.conf</code> file and insert a comment (<code>#</code>) at the start of the <code>socks4 127.0.0.1 9050</code> to disable the TOR proxy option. Then, insert each additional proxy server on a new line at the end of the <strong>ProxyList</strong>, as shown below:</li>
</ol>
<img src="../media/file127.png" width="488" height="311"/>
<ol>
<li>Next, to save the configuration file, press <code>CTRL + X</code> on your keyboard, then <code>Y</code> to confirm the filename and hit <code>Enter</code> to save and exit to the Terminal.</li>
<li>Before using Proxychains, use the following commands to retrieve your real public IPv4 address:</li>
</ol>
<div class="C1-ConsolePACKT">
<pre><code>kali@kali:~$ curl ifconfig.co</code></pre>
</div>
<ol>
<li>To use Proxychains, use the following commands to launch a Firefox web browsing session that will route all internet-based traffic through the list of proxy servers:</li>
</ol>
<div class="C1-ConsolePACKT">
<pre><code>kali@kali:~$ proxychains4 -f /etc/proxychains4.conf firefox</code></pre>
</div>
<blockquote>
<p>The <code>proxychains4 -f &lt;configuration file&gt;</code> command enables us to select a specific configuration file to use.</p>
</blockquote>
<ol>
<li>Next, once the Firefox application opens on Kali Linux, go to <a href="https://ifconfig.co/">https://ifconfig.co/</a> to verify the public IP address and geolocation that’s seen by devices on the internet, as shown below:</li>
</ol>
<img src="../media/file128.png" width="690" height="450"/>
<p>As shown in the preceding screenshot, the public IP address is the last proxy server on the <code>proxychains4.conf</code> file. In addition, the public IP address shown here is different from your real public address from step 8.In addition, you can use the following commands to download and view the <code>ifconfig.co</code> webpage with the new public address:</p>
<div class="C1-ConsolePACKT">
<pre><code>kali@kali:~$ proxychains4 -f /etc/proxychains4.conf curl ifconfig.co</code></pre>
</div>
<p>The following screenshot shows the public IP addresses with and without using Proxychains:</p>
<img src="../media/file129.png" alt="C:\Users\Glen\AppData\Local\Temp\SNAGHTML718659e.PNG" width="1191" height="420"/>
<ol>
<li>Lastly, whenever you want to use Proxychains, ensure you check whether the proxy servers are online and use the commands shown in step 9.</li>
</ol>
<p>Next, you will learn how to route your internet-based traffic through the dark web using TOR.</p>
</section>
<section id="the-onion-router-tor" class="level3" data-number="5.6.3">
<h3 data-number="5.6.3">The Onion Router (TOR)</h3>
<p>The TOR project and its services are commonly used by cybersecurity professionals, researchers and cyber criminals to both anonymize their internet-based traffic and to access the dark web. TOR allows a user to route their internet-based through multiple nodes on the TOR network as a technique to conceal the sender’s identity and geolocation data from other systems on the internet.This type of service and technology is very useful for ethical hackers and penetration testers as TOR adds multiple layers of data encryption for improved security and anonymity. Whenever a user sends a packet into the TOR network, the TOR application on their computer will encrypt the packet by wrapping it in multiple layers of data encryption. When the encrypted packet arrives at the first-node within the TOR network, the first-node decrypts the first layer of encryption to determine how to forward the packet to the next node. When the packet arrives at the second-node, it decrypts another layer and the process is repeated until the packet arrives at the exit- or last node within the TOR network. The exit-node will perform the final decryption to determine the true destination IP address of the packet and forwards it towards the destination host on the internet/dark web.Therefore, the destination host on the internet or dark web will not be to trace the packet back to the real source as each TOR-node only knows about the previous and next-node when forwarding packets within the TOR network.The following diagram shows the chaining effect in the TOR network:</p>
<img src="../media/file130.png" alt="G:\.shortcut-targets-by-id\1CmOHjwHtAmAazfQWf4vwF3iXF6hLABBW\Packt Projects\09 - Reconnaissance for Ethical Hackers\Chapter 03\Diagrams\3.14.png" width="883" height="420"/>
<p>To get started with setting up TOR services and TOR Browser on Kali Linux, please use the following instructions:</p>
<ol>
<li>Open <strong>Oracle VM VirtualBox Manager</strong> and power-on the <strong>Kali Linux</strong> virtual machine.</li>
<li>Next, after logging-in to Kali Linux, open the <strong>Terminal</strong> and use the following commands to update the software package repository list:</li>
</ol>
<div class="C1-ConsolePACKT">
<pre><code>kali@kali:~$ sudo apt update</code></pre>
</div>
<ol>
<li>Next, install <strong>TOR</strong> and <strong>TOR Browser</strong> on Kali Linux with the following commands:</li>
</ol>
<div class="C1-ConsolePACKT">
<pre><code>kali@kali:~$ sudo apt install -y tor torbrowser-launcher</code></pre>
</div>
<ol>
<li>Next, launch the <strong>TOR Browser</strong> application with the following commands:</li>
</ol>
<div class="C1-ConsolePACKT">
<pre><code>kali@kali:~$ torbrowser-launcher</code></pre>
</div>
<ol>
<li>Once the <strong>TOR Browser</strong> appears, click on <strong>Connect</strong> to establish a connection between the TOR Browser and the TOR network, as shown in the following screenshot:</li>
</ol>
<img src="../media/file131.png" width="1024" height="418"/>
<ol>
<li>Once the connection is established to the TOR network, go to <a href="https://ifconfig.co/">https://ifconfig.co/</a> to determine if the traffic from the TOR Browser is being routed over the TOR network, as shown below:</li>
</ol>
<img src="../media/file132.png" width="517" height="344"/>
<blockquote>
<p>If you choose to visit a web address with the <code>.onion</code> extension, you are doing so at your own risk. Ensure you do not download anything, trust anything or anyone on the dark web.</p>
</blockquote>
<ol>
<li>Next, close the <strong>TOR Browser</strong> to terminal the connection and the application.</li>
</ol>
<p>The TOR Browser will only route traffic from itself through the TOR network and not from any other application on Kali Linux. To route traffic from any application on Kali Linux through the TOR network, please use the following configurations:</p>
<ol>
<li>On <strong>Kali Linux</strong>, open the <strong>Terminal</strong> and use the following commands to open the <code>proxychains4.conf</code> file:</li>
</ol>
<div class="C1-ConsolePACKT">
<pre><code>kali@kali:~$ sudo nano /etc/proxychains4.conf</code></pre>
</div>
<ol>
<li>Once the <code>proxychains4.conf</code> file is open, uncomment the <code>socks4 127.0.0.1 9050</code> line and comment all other proxy servers within the <strong>ProxyList</strong> as shown below:</li>
</ol>
<img src="../media/file133.png" width="465" height="318"/>
<ol>
<li>Next, to save the configuration file, press <code>CTRL + X</code> on your keyboard, then <code>Y</code> to confirm the filename and hit <code>Enter</code> to save and exit to the Terminal.</li>
<li>Next, start the TOR service on Kali Linux with the following commands:</li>
</ol>
<div class="C1-ConsolePACKT">
<pre><code>kali@kali:~$ sudo systemctl start tor
kali@kali:~$ sudo systemctl status tor</code></pre>
</div>
<p>The following screenshot shows the TOR service is running (active):</p>
<img src="../media/file134.png" width="1170" height="305"/>
<ol>
<li>Next, use the following commands to launch an application while routing all its internet-based traffic through the TOR network:</li>
</ol>
<div class="C1-ConsolePACKT">
<pre><code>kali@kali:~$ proxychains4 firefox</code></pre>
</div>
<p>The following screenshot shows the internet-based traffic from the Firefox application is being routed through the TOR network:</p>
<img src="../media/file135.png" width="466" height="462"/>
<ol>
<li>Lastly, use the following commands to stop the TOR service on Kali Linux:</li>
</ol>
<div class="C1-ConsolePACKT">
<pre><code>kali@kali:~$ sudo systemctl stop tor
kali@kali:~$ sudo systemctl status tor</code></pre>
</div>
<p>Having completed this section, you’ve learnt about various methods to anonymize your internet-based traffic while learning how to use proxychains and TOR services on Kali Linux.</p>
</section>
</section>
<section id="summary-3" class="level2" data-number="5.7">
<h2 data-number="5.7">Summary</h2>
<p>During this chapter, you have learnt how reconnaissance plays an important role during penetration testing and how it helps ethical hackers to build a profile about their targets to better understand the security vulnerabilities that exists on them. In addition, you have explored the various TTPs of reconnaissance and how penetration testers leverages OSINT to identify how targeted organizations are leaking sensitive data about themselves and how it can be leveraged by a real adversary. Lastly, you have gained the skills and hands-on experience to conceal your online identity and anonymize your internet-based traffic as an ethical hacker and penetration tester.I trust that the knowledge presented in this chapter has provided you with valuable insights, supporting your path towards becoming an ethical hacker and penetration tester in the dynamic field of cybersecurity. May this newfound understanding empower you in your journey, allowing you to navigate the industry with confidence and make a significant impact. In the next chapter, <em>Exploring Open Source Intelligence</em>, you will gain the practical skills needed to efficiently harvest and analyze publicly available information to create intelligence on a target.</p>
</section>
<section id="further-reading-3" class="level2" data-number="5.8">
<h2 data-number="5.8">Further Reading</h2>
<ul>
<li>MITRE ATT&amp;CK Reconnaissance - <a href="https://attack.mitre.org/tactics/TA0043/">https://attack.mitre.org/tactics/TA0043/</a></li>
<li>OSINT lifecycle - <a href="https://www.sans.org/blog/what-is-open-source-intelligence/">https://www.sans.org/blog/what-is-open-source-intelligence/</a></li>
<li>OSINT Framework - <a href="https://osintframework.com/">https://osintframework.com/</a></li>
</ul>
</section>
</section>
</div>
</div>
</body>
</html>