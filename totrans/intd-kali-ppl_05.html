<html><head></head><body>
<div id="sbo-rt-content"><div id="_idContainer063">
<h1 class="chapter-number" id="_idParaDest-50"><a id="_idTextAnchor052"/>3</h1>
<h1 id="_idParaDest-51"><a id="_idTextAnchor053"/>Installing the Kali Purple Linux Environment</h1>
<p>So far, we’ve learned how the events of the world have shaped the evolution of cybersecurity concepts over time, resulting in the need for, and creation of, Kali Purple, along with other defensive security packages. We’ve had a taste of the ELK Stack, which serves as the core component of the SIEM, itself the core component of a SOC, with the SOC a core component of Kali Purple. What do you say we start assembling the very atmosphere we’ve been raving about? Let’s get our <span class="No-Break">hands dirty!</span></p>
<p>In this chapter, we are going to prepare our personal technology to host and operate our very own instance of Kali Purple. While the sections we cover may seem random, they are presented to you in a purposeful and strategic order. It is highly recommended that you follow this order of operations to ensure the smoothest experience of prepping your technology. Rest assured that there is a method to our madness, and it will be described along the way as our actions relate to what we’re doing at the time. The primary sections we will cover in this chapter will be presented in the <span class="No-Break">following order:</span></p>
<ul>
<li>Acquiring the Kali <span class="No-Break">Purple distribution</span></li>
<li>The <a id="_idIndexMarker314"/>installation of a <strong class="bold">virtual </strong><span class="No-Break"><strong class="bold">machine</strong></span><span class="No-Break"> (</span><span class="No-Break"><strong class="bold">VM</strong></span><span class="No-Break">)</span></li>
<li>The installation of <span class="No-Break">Kali Purple</span></li>
<li>The <a id="_idIndexMarker315"/>installation of the Java <strong class="bold">Software Development </strong><span class="No-Break"><strong class="bold">Kit</strong></span><span class="No-Break"> (</span><span class="No-Break"><strong class="bold">SDK</strong></span><span class="No-Break">)</span></li>
</ul>
<p>Because people use a variety of personal computing devices, we will cover a variety of circumstances, offering instructions for Windows, Mac, and Linux hosts. While there are competing products with Kali Linux for pentesting and offensive security purposes, at the time of writing only Kali offers such a comprehensive selection of defensive cybersecurity tools (100+) on top of their offensive suite. This chapter, however, deals only with the acquisition and installation of the Purple operating system. There are some differences in how you go about acquiring and installing the appropriate applications, based on which operating system you use. If applicable, we will offer insights into common problems users might encounter while negotiating the process of setting up a Kali Purple environment, as well as offer solutions <span class="No-Break">where needed.</span></p>
<p>It’s important to understand that Kali Purple is built to accommodate the mindset of a cybersecurity analyst, be it offensive or defensive. Being a true analyst in any capacity of business means developing independent research, thinking, and problem-solving abilities. If you are not yet comfortable that you are operating at that level, fret not! We will provide guidance throughout and resources at the end of the chapter to <span class="No-Break">help you.</span></p>
<p>By the end of this chapter, you should have a fully functional Kali Purple environment that is armed with many of the tools we’ve already discussed – as well as a whole bunch of tools we haven’t discussed – and ready to be populated with some of the additional features discussed throughout the rest of this book. You will also have the experience and this chapter as a reference point to coach others in setting up their Kali Purple environments if you <span class="No-Break">so choose.</span></p>
<h1 id="_idParaDest-52"><a id="_idTextAnchor054"/>Technical requirements</h1>
<p>The technical requirements for this chapter are <span class="No-Break">as follows:</span></p>
<ul>
<li><strong class="bold">Minimum</strong>: Should be a computing device with either <em class="italic">amd64 (x86_64/64-bit)</em> or <em class="italic">i386 (x86/32-bit)</em> architectures. Kali recommends the <em class="italic">amd64</em> option. The system should contain at least <em class="italic">2 GB</em> of RAM and <em class="italic">20 GB</em> of disk space. However, some of the tools contained within Kali Linux tend to be resource hogs; Burp Suite is famous for this. The Kali installation page at <a href="https://www.kali.org/docs/installation/hard-disk-install/">https://www.kali.org/docs/installation/hard-disk-install/</a> recommends as much as <em class="italic">8 GB</em> of RAM if you intend to use <span class="No-Break">such applications.</span></li>
<li><strong class="bold">Recommended</strong>: It is suggested by practitioners in the cybersecurity field state that you should aim for the <em class="italic">amd64 (x86_64/64-bit)</em> architecture with <em class="italic">8 GB</em> of RAM – even more RAM if available – as well as up to <em class="italic">200 GB</em> of disk space. Don’t worry if you don’t have these resources available. As long as you can meet the minimum requirements, you will be fine for the purposes of learning and experiencing <span class="No-Break">Kali Purple.</span></li>
</ul>
<p>While there are some scenarios where Kali Purple could be installed with smaller requirements than these, we’re not writing this book to torture you—the recommended requirements will cover most scenarios in this book. As with all technology, Kali Purple’s requirements are truly a case of the more <span class="No-Break">the merrier.</span></p>
<h1 id="_idParaDest-53"><a id="_idTextAnchor055"/>Acquiring the Kali Purple distribution</h1>
<p>The first step in setting up our Kali Purple environment is acquiring Kali Purple itself. This section will <a id="_idIndexMarker316"/>not be necessary for those of you who already work from a Kali Linux system. If that applies to you, feel free to skip ahead to the <em class="italic">The installation of Kali Purple</em> section, where you can get instructions about how to grab the Purple framework from within your Kali Linux environment. If that does not apply to you or you’d like to experience the process anyway, keep <span class="No-Break">on reading.</span></p>
<p>We will find and download the combined Kali Linux and Purple framework first. This is because some VM installations, including the VirtualBox we will use as an example, will install the VM, Kali Linux, and Purple frameworks simultaneously, saving us a bunch <span class="No-Break">of time.</span></p>
<p>Before doing so, let’s revisit the CIA triad. After all, the purpose of Kali Purple is security! So, let’s practice smart security habits from the start. Here, we will put to use the I from the CIA triad – integrity. Integrity, as applied here, means the data we expect arrives from its origin to our devices unchanged. We can forensically confirm that by comparing the hash values. The application packages we will download will have a hash value assigned to them at the point of download. We will walk through finding that hash, recording it, and then calculating it after it’s downloaded to compare <span class="No-Break">with it.</span></p>
<p>If you prefer, you can back up your system or create a restore point now, or wait until after you’ve finished downloading files. However you go about it, just make sure you perform an appropriate backup <em class="italic">before</em> you invoke any installation or activity requiring partitioning or a change to <span class="No-Break">your system.</span></p>
<h2 id="_idParaDest-54"><a id="_idTextAnchor056"/>Linux backup</h2>
<p>Linux has <a id="_idIndexMarker317"/>a plethora of backup options. Since the power and beauty of Linux is the command line, we’ll provide those instructions here. First, you might wish to consider compressing the files to save space and allow for easier transfer to the <span class="No-Break">backup medium.</span></p>
<p>To compress a file, type <span class="No-Break">the following:</span></p>
<pre class="console">
tar -czvf backup.tar.gz /&lt;path_to_file_needing_backup&gt;/</pre> <p>Once compressed, you can back up the file by using <strong class="source-inline">rsync</strong>. Type <span class="No-Break">the following:</span></p>
<pre class="console">
rsync -avzh /&lt;path_to_original_source&gt;/&lt;path_to_backup-medium&gt;/</pre> <h2 id="_idParaDest-55"><a id="_idTextAnchor057"/>Windows backup</h2>
<p>Decide the medium you wish to use to back up your device. If it’s a physical device such as an external hard drive, get it ready and plug it into your device. Your machine should recognize the <a id="_idIndexMarker318"/>device and notify you of its location. If it’s a network device, record the location so that you know where to tell the backup software to process your request. Windows has changed the way it offers backup options over the years. In general, you can open the start menu and type <strong class="source-inline">backup</strong> and <strong class="source-inline">restore</strong> in the search bar. Follow the prompts thereafter. Alternatively, you can select <strong class="bold">Start</strong> | <strong class="bold">Settings</strong>, type <strong class="source-inline">restore</strong> in the search bar, and select <strong class="bold">Create a </strong><span class="No-Break"><strong class="bold">restore point</strong></span><span class="No-Break">.</span></p>
<h2 id="_idParaDest-56"><a id="_idTextAnchor058"/>macOS backup</h2>
<p>Decide on your backup medium. Plug in your backup device and follow the onscreen prompts. If you <a id="_idIndexMarker319"/>are not prompted, you can use Time Machine to back up your device. You can get there by going to System Preferences. Then, click on the Apple menu | <strong class="bold">System Preferences</strong> | <strong class="bold">Time Machine</strong>. Once in the <strong class="bold">Time Machine preferences</strong> pane, click <strong class="bold">Select Backup Drive</strong>, and then choose the drive you wish to back up to. Make sure you enable Time Machine by ensuring the on/off switch is <span class="No-Break">toggled on.</span></p>
<p>Let’s get started. When downloading a software package for the first time, it’s always wisest to grab the most recent stable release. The exception to this would be if you were a trained and/or experienced tester with a protected environment, such as a sandbox, to deploy <a id="_idIndexMarker320"/>the application. A <strong class="bold">sandbox</strong> is an isolated section of your system that simulates the full system with isolated processes. It limits resources and interaction with the underlying system so that any malicious or broken software being executed within its virtual container will, in theory, not harm the actual machine that the process is being tested on. However, we aren’t here to test, so let’s stick with the most recent stable release. To grab the most recent and stable Kali Purple, open your web browser, type in the address <a href="https://www.kali.org/">https://www.kali.org/</a>, and when the page loads, either select <strong class="bold">Get Kali</strong> from the top navigation bar or the <strong class="bold">Download</strong> link if it is present. They are both highlighted with a border in <span class="No-Break"><em class="italic">Figure 3</em></span><em class="italic">.1</em>, and both take you to the <span class="No-Break">same place.</span></p>
<p>Select one <a id="_idIndexMarker321"/>of the highlighted links to get to the Kali <span class="No-Break">Purple distribution:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer027">
<img alt="Figure 3.1 – The Kali Linux home page" height="535" src="image/B21223_03_1.jpg" width="1430"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.1 – The Kali Linux home page</p>
<p>When the new page loads after clicking, slowly scroll down it a short distance until you see the section labeled <strong class="bold">Kali Purple</strong>, and find the tile underneath it that says <strong class="bold">Recommended</strong> across the top. It should be the tile on the left, as shown in <span class="No-Break"><em class="italic">Figure 3</em></span><span class="No-Break"><em class="italic">.2</em></span><span class="No-Break">.</span></p>
<p>There are two actions to take on the <span class="No-Break">download tile:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer028">
<img alt="Figure 3.2 – The Kali Purple download tile" height="452" src="image/B21223_03_2.jpg" width="414"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.2 – The Kali Purple download tile</p>
<p>The two fields <a id="_idIndexMarker322"/>highlighted in <span class="No-Break"><em class="italic">Figure 3</em></span><em class="italic">.2</em> are what we need to take action on. First, return to your browser and click on the <strong class="bold">sum</strong> box that is highlighted. When you do, the image will appear to flip over and provide you with a SHA-256 Hash of the Kali Purple distribution. You need to copy and paste this; alternatively, record this hash somewhere you can easily reference after downloading <span class="No-Break">Kali Purple.</span></p>
<p>Record the SHA-256 hash to compare <span class="No-Break">after download:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer029">
<img alt="Figure 3.3 – The SHA256 hash for the Kali Purple download" height="450" src="image/B21223_03_3.jpg" width="406"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.3 – The SHA256 hash for the Kali Purple download</p>
<p>Remember that a hash is a one-way mathematical operation. It’s a fixed-size alphanumeric <a id="_idIndexMarker323"/>value generated by taking input from a computer – a <em class="italic">message</em> if you will – and applying an advanced algorithm to it, resulting in the unique fixed-size output. It is designed so that even if the tiniest molecule – if a single 1 or 0 – of an application/process is changed, the resulting hash value is significantly different than <span class="No-Break">the original.</span></p>
<p>For example, let’s take the following statement – <em class="italic">I love </em><span class="No-Break"><em class="italic">Packt Publishing.</em></span></p>
<p>The SHA-256 hash value of that statement is <span class="No-Break">the following:</span></p>
<pre class="source-code">
2771187E06ECFAAA0B343D9C6808C503923DAF5323477B8B0BC0F39FEEF74CFA</pre> <p>Now, let’s change the string by simply replacing the period with an exclamation point – <em class="italic">I love </em><span class="No-Break"><em class="italic">Packt Publishing!</em></span></p>
<p>The SHA-256 hash value of the statement becomes <span class="No-Break">the following:</span></p>
<pre class="source-code">
3491BDDE067911CA8ACE3B1E8319A9A7817356008498C92E195B9B412D5452F2</pre> <p>Note how the two values do not even remotely resemble each other. The length of the output will always be the same. This can be seen if we simply remove everything from the statement but the brand – <span class="No-Break"><em class="italic">Packt</em></span><span class="No-Break">.</span></p>
<p>We get a new SHA-256 hash value that is precisely the same length as the <span class="No-Break">other hashes:</span></p>
<pre class="source-code">
2D4CCDC3F62901AAD8A6D65B02C1D9F48EA83913209DD41AB5F3EC6F83BECDA9</pre> <p>There are <a id="_idIndexMarker324"/>other types of hash algorithms you can use, but if you work in, or desire to work, in a cybersecurity career, the two hash <a id="_idIndexMarker325"/>algorithms you should most familiarize yourself with are the <strong class="bold">Message Digest 5</strong> (<strong class="bold">MD5</strong>) and the <strong class="bold">Secure Hash Algorithm 256</strong> (<strong class="bold">SHA-256</strong>) we used <a id="_idIndexMarker326"/>earlier. They are the two hashes you are most likely to encounter <span class="No-Break">in practice.</span></p>
<p class="callout-heading">Note</p>
<p class="callout">Hash values are so reliable that they are frequently referenced within the United States legal system as scientific evidence, and proof of criminal or non-criminal activity, during courtroom proceedings. Hash values can be used to determine the admissibility of evidence at trial. It is also a key tool in digital forensics and is used in the most complex cybercrime <a id="_idIndexMarker327"/>investigations. The <strong class="bold">Federal Bureau of Investigation</strong> (<strong class="bold">FBI</strong>) regularly uses hash values to help solve their crimes. Check <a id="_idIndexMarker328"/>out the link in the <em class="italic">Further reading</em> section <a id="_idIndexMarker329"/>to discover how the agency uses <a id="_idIndexMarker330"/>hash values for the <strong class="bold">Privacy Impact Assessment</strong> (<strong class="bold">PIA</strong>), <strong class="bold">Child Victim Identification Program</strong> (<strong class="bold">CVIP</strong>), and <strong class="bold">Innocent Images National </strong><span class="No-Break"><strong class="bold">Initiative</strong></span><span class="No-Break"> (</span><span class="No-Break"><strong class="bold">IINI</strong></span><span class="No-Break">).</span></p>
<p>After recording the hash, go ahead and return to your browser, and click on the download icon shown in the lower left-hand corner of the tile (highlighted in red in <span class="No-Break"><em class="italic">Figure 3</em></span><em class="italic">.2</em>) to begin downloading the Kali Purple <strong class="source-inline">.iso</strong> file. Depending on the browser you are using, you should see a popup in the upper right-hand corner that loosely resembles the image in <span class="No-Break"><em class="italic">Figure 3</em></span><em class="italic">.4</em>, confirming that the <strong class="source-inline">.iso</strong> file is in the process <span class="No-Break">of downloading.</span></p>
<p>Look in the upper right-hand corner of your browser for an active <span class="No-Break">download box:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer030">
<img alt="Figure 3.4 – The Kali Purple .iso image download" height="140" src="image/B21223_03_4.jpg" width="609"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.4 – The Kali Purple .iso image download</p>
<p>Throughout this section, anytime you see the word <strong class="source-inline">username</strong> printed in a file path, you should assume that means you need to replace that text with your actual username within that computing environment. For example, by replacing <strong class="source-inline">username</strong> with the actual username of the user in the following file paths, the <strong class="source-inline">.iso</strong> file will be found in one of the <a id="_idIndexMarker331"/>following locations, based on the operating system you <span class="No-Break">are using:</span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table001-1">
<colgroup>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold">OS</strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold">Location</strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break">Linux</span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline">/</strong><span class="No-Break"><strong class="source-inline">home/username/Downloads</strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break">Mac</span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline">/</strong><span class="No-Break"><strong class="source-inline">Users/username/Downloads</strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break">Windows</span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline">C:\Users\username\Downloads</strong></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Table 3.1 – The default download file paths by operating system</p>
<p>Once downloaded, you have a number of options about how to proceed, but before moving ahead, let’s first verify the hash and match it to the one we recorded from the website. We do not assume your technical level here. So, let’s just keep it simple, and you can explore shortcuts and alternatives in your own time when you believe you’re ready for that. In the meantime, let’s open a command-line utility and navigate to the respective folder where the <span class="No-Break">download resides.</span></p>
<h2 id="_idParaDest-57"><a id="_idTextAnchor059"/>Linux</h2>
<p>First, you will <a id="_idIndexMarker332"/>open a terminal window. From there, type <strong class="source-inline">Bash</strong> to open <a id="_idIndexMarker333"/>the command shell. <strong class="bold">Bash</strong> stands for <strong class="bold">Bourne Again Shell</strong>, which is the command terminal most frequented by Linux users. Then, type <strong class="source-inline">cd ~/Downloads</strong> at the command prompt to get to the file. <strong class="bold">cd</strong> stands for <strong class="bold">change directory</strong>, and the <a id="_idIndexMarker334"/>squiggly symbol found on the upper-left side of your keyboard, called a tilde, represents the home directory. That allows you to quickly navigate to another directory no matter what file path you are <span class="No-Break">presently in.</span></p>
<p>You can <a id="_idIndexMarker335"/>confirm that you are in the correct directory in two different ways. First, type <strong class="source-inline">pwd</strong>, which stands for <strong class="bold">print working directory</strong>. That will display the absolute path, which should be <strong class="source-inline">/home/username/Downloads</strong> in this case. The second way you can confirm that the file is in the directory is by typing <strong class="source-inline">ls</strong>, which stands for <strong class="bold">list</strong>. You should see a file that is named <strong class="source-inline">kali-linux-2023.3-installer-purple-amd64.iso</strong> or very similar to that. If the file is present, you then type <strong class="source-inline">sha256sum kali-linux-2023.3-installer-purple-amd64.iso</strong>, replacing the filename with the exact filename of your Kali Purple download, should it be different than presented here. The result should be printed on the next line. It would look something like <strong class="source-inline">e3e977a8f99622be55365cb9c21dc7f6e625827cea85233cea2cc04ac09eee3e</strong>, and it should match, character for character, the hash value you recorded before downloading <span class="No-Break">Kali Purple.</span></p>
<h2 id="_idParaDest-58"><a id="_idTextAnchor060"/>Mac</h2>
<p>Open the <strong class="source-inline">Applications</strong> folder and then the <strong class="source-inline">Utilities</strong> folder. From there, select and open <a id="_idIndexMarker336"/>a terminal window. Identical to Linux, type <strong class="source-inline">cd ~/Downloads</strong> to get to the file location. You can also verify your file path by typing <strong class="source-inline">pwd</strong>, but because this is a Mac, the absolute path will appear slightly differently than Linux. It should be <strong class="source-inline">/Users/username/Downloads</strong> in this case. Using the <strong class="source-inline">ls</strong> list command will show the directory’s contents, where you can look for the <strong class="source-inline">.iso</strong> file you downloaded. Slightly different from Linux, to get the hash value of the download, type <strong class="source-inline">shasum -a 256 kali-linux-2023.3-installer-purple-amd64.iso</strong>, replacing the filename with the actual filename if it is different. A different filename is possible if Kali Linux releases an updated version of Kali Purple after this book is printed but before you read it. Just like Linux, the results should look something like <strong class="source-inline">e3e977a8f99622be55365cb9c21dc7f6e625827cea85233cea2cc04ac09eee3e</strong>, and it should match, character for character, the hash value you recorded before downloading Kali Purple. Again, this value will be different if a newer version of Kali Purple is released. However, what remains the same is that the value should match the value presented at the download location on <span class="No-Break">the website.</span></p>
<h2 id="_idParaDest-59"><a id="_idTextAnchor061"/>Windows</h2>
<p>Windows <a id="_idIndexMarker337"/>offers two basic methods of acquiring a file hash. One is through the command prompt, and the other is through a powerful automation and scripting utility called PowerShell. The specifics of PowerShell are beyond the scope of this book, but as a cybersecurity professional, you will eventually want to take some time to study and learn about it. Microsoft has provided free introductory training available on their learning platform. A link to this training is available in the <em class="italic">Further reading</em> section at the end of <span class="No-Break">this chapter.</span></p>
<p>Let’s start with the command prompt. Press the <em class="italic">Windows</em> key, and in the popup, type <strong class="source-inline">cmd</strong> into the search bar. Select the <strong class="bold">Command Prompt</strong> application that is presented to you. Unlike Linux and Mac, Windows offers a nifty little shortcut to get to the <strong class="source-inline">Downloads</strong> folder that doesn’t require you to even know the username that is logged on at the time. If your <strong class="source-inline">Downloads</strong> folder is in the Windows default location, you can use the following command. Simply type <strong class="source-inline">cd %USERPROFILE%\Downloads</strong>, and the system will <a id="_idIndexMarker338"/>take you directly to the <strong class="source-inline">Downloads</strong> folder of whichever user is logged onto the system at the time. Once there, type <strong class="source-inline">dir</strong> to view the contents of the directory, and look for the Kali Purple <strong class="source-inline">.iso</strong> file you downloaded. To get the SHA-256 hash of the file, type <strong class="source-inline">CertUtil -hashfile kali-linux-2023.3-installer-purple-amd64.iso SHA256</strong> and press <em class="italic">Enter</em>. The hash should return <strong class="source-inline">e3e977a8f99622be55365cb9c21dc7f6e625827cea85233cea2cc04ac09eee3e</strong>, but the main thing is that, no matter what it returns, it matches the hash you recorded at the <span class="No-Break">download site.</span></p>
<p>The second method involves the aforementioned PowerShell. To invoke PowerShell, press the <em class="italic">Windows</em> key and type <strong class="source-inline">PowerShell</strong> in the search bar. Then, select the application once it appears. Like the Command Prompt, there is also a shortcut to reach the <strong class="source-inline">Downloads</strong> folder in PowerShell. Type <strong class="source-inline">cd $HOME\Downloads</strong> to get the <strong class="source-inline">.iso</strong> file. Then, type <strong class="source-inline">dir</strong> to confirm that the required file is in the folder. To get the hash of the file, type <strong class="source-inline">Get-FileHash -Algorithm SHA256 -Path kali-linux-2023.3-installer-purple-amd64.iso</strong>, which should return the same hash value shown earlier or at least match the value provided at the download location. Additionally, PowerShell offers the ability to grab a file without first navigating to the <strong class="source-inline">Downloads</strong> folder, provided you know the file path and have recorded the filename you want hashed. In this case, you would type the following command immediately after opening the PowerShell utility – <strong class="source-inline">Get-FileHash -Algorithm SHA256 -Path C:\Users\username\Downloads\kali-linux-2023.3-installer-purple-amd64.iso</strong>. Then, look for the same result from the <span class="No-Break">previous step.</span></p>
<p>Once the integrity and success of the download are confirmed, we need to consider whether we’re going to transfer that file to a disk or USB drive, and we need to back up our device before we act on the Kali Purple download or install a VM. We could’ve backed up our device before downloading Kali Purple, but since we’ve not done so yet and we’ve confirmed the integrity of the download, backing it up now will preserve the download file should we need to restore it to this <span class="No-Break">point later.</span></p>
<p>Once all our data is backed up, we might choose to put a copy of the Kali Purple <strong class="source-inline">.iso</strong> file on a USB flash drive or external hard drive for portability, especially if we have multiple devices on which we’d like to install the operating system. Of course, if we wanted to <a id="_idIndexMarker339"/>use this system across a large corporate network, there are ways to push such an installation. However, the networking knowledge and skills to perform such an action are beyond the scope of <em class="italic">Introduction to Kali Purple</em>. Additionally, it’s important to keep in mind that this distribution contains advanced penetration testing tools, which might not be the most secure option to widely distribute across an organization. It would probably make more sense to keep this tool set highly restricted to a small group of trained specialists within <span class="No-Break">your organization.</span></p>
<p>Now that we’ve acquired Kali Purple and backed up our devices, it’s time to consider how we are going to run it so that we can properly install it. It’s important to consider that Kali Purple is a very powerful suite of tools capable of doing significant – even criminal – damage if placed into the hands of bad actors. We should keep it tightly guarded and only run it under a closely managed space, where we can quickly respond if needed. The best option to establish this type of environment is a pseudo type of sandbox called a VM. We are going to cover establishing VMs in the next section, in which it is recommended to run Kali Purple, even if the host system is already a <span class="No-Break">Linux variant.</span></p>
<h1 id="_idParaDest-60"><a id="_idTextAnchor062"/>The installation of a VM</h1>
<p>In this section, we are going to work on securely isolating a part of our device’s operating <a id="_idIndexMarker340"/>system and setting it aside, solely for the purpose of running Kali Purple. This isolation will allow you to access the resources needed to properly run Kali Purple without adversely affecting the underlying operating system, which we will refer to as the host system from now on. This isolation is typically referred to as a virtual machine, and we have a plethora of options to set <span class="No-Break">one up.</span></p>
<p>A VM helps to provide a controlled environment if we make a mistake at any point, ensuring we can quickly revert and start over without causing damage to the host. It also helps contain any potential cyber threats should they materialize and prevent any other unintended consequences. They are called virtual machines because the separate instances created by them are considered virtual, if not miniature, copies of the host system. What happens in the VM stays in <span class="No-Break">the VM.</span></p>
<p>VMs are set up and arranged by virtualization software such as VMware or VirtualBox. While it is not necessarily bad to have more than one virtualization software application installed on your device, it can create some unnecessary challenges, such as competition for the computer’s resources, compatibility, and software conflicts. That’s a group of issues that we <a id="_idIndexMarker341"/>don’t want to deal with while developing our Kali Purple skillset. Therefore, we’re going to take a moment to check and see whether any such virtualization software is already installed on <span class="No-Break">your system.</span></p>
<p>If you’re <a id="_idIndexMarker342"/>presently operating on a Linux system, find and open a command terminal and type <strong class="source-inline">lsmod | grep kvm</strong> to check whether the <strong class="bold">Kernel-based Virtual Machine</strong> (<strong class="bold">KVM</strong>) module is loaded. If any output of any kind at all is returned, then you know that KVM is indeed installed and ready to be used. Another option is to type <strong class="source-inline">virt-what</strong> into the terminal window. It’s a command that checks the system for the presence of a wide array of virtualization technologies, returning what those are if they are present. If your Linux variant is part of the Debian family, which would include Kali Linux, you can type <strong class="source-inline">dpkg -l | grep virtual</strong>; alternatively, if your variant is part of the Red Hat distro family, you can type <strong class="source-inline">rpm -qa | grep virtual</strong> to search for packages related to virtualization and display the results of any that are successfully installed on <span class="No-Break">your system.</span></p>
<p>If you’re using <a id="_idIndexMarker343"/>a macOS for your Kali Purple experience, you can simply go <a id="_idIndexMarker344"/>to the <strong class="source-inline">Applications</strong> folder in <a id="_idIndexMarker345"/>Finder and look for <strong class="bold">VMware Fusion</strong>, <strong class="bold">Parallels Desktop</strong>, and <strong class="bold">VirtualBox</strong>. There are other virtualization software platforms that are compatible with Mac, but they are not best suited to host Kali Purple and are likely to clash with the resources needed by those three big players. If you see these three, then you already have virtualization software installed on <span class="No-Break">your Mac.</span></p>
<p>For the Windows users out there, press your <em class="italic">Windows</em> key and type in <strong class="source-inline">hyper-v manager</strong>. If the Hyper-V Manager appears in the search results, then you know you have virtualization software installed on your device, which is the most likely case. You’ll also want to search for <strong class="bold">VirtualBox</strong>, <strong class="bold">VMWare</strong>, <strong class="bold">Parallels</strong>, <span class="No-Break">and </span><span class="No-Break"><strong class="bold">QEMU</strong></span><span class="No-Break">.</span></p>
<p>In each of these cases, the lists of potential virtualization software are just a summary of the most common, most popular, and most likely installations. You might wish to take the extra step of opening a search engine and running some searches/queries regarding virtualization software that is compatible with your specific operating system and version. Then, return and dig a little deeper using the methods we just discussed. If you discover that you have virtualization software installed on your device, there are a couple of things you need to know to <span class="No-Break">move forward.</span></p>
<p>First, you can search to find instructions to remove the software from your device if you like and then follow the example that we will provide (we will use VirtualBox due to its broad compatibility across Linux, macOS, and Windows) to install new virtualization software. Keep in mind, that there may be existing VMs in place, and you will want to ensure you’re <a id="_idIndexMarker346"/>not getting rid of something you might prefer to keep before removing <span class="No-Break">the software.</span></p>
<p>However, it wouldn’t be so bad if you decided to keep the existing virtualization software and simply ran some additional searches about how to set up a new VM using that existing software. The odds are that the search will return results that are easy enough to follow if that’s the route you want to go. Otherwise, we are going to move forward with the idea that you have no virtualization software and need to acquire and install it for the <span class="No-Break">first time.</span></p>
<p class="callout-heading">Note</p>
<p class="callout">If there is no evidence of having already established virtualization on your device, you will want to ensure that virtualization is enabled in your device’s BIOS or UEFI settings. To do that, you need to run an internet search for your device’s specific brand and model to see which key press you need to make to access those settings. Usually, they are one of the <em class="italic">Del</em>, <em class="italic">F2</em>, <em class="italic">F10</em>, and <span class="No-Break"><em class="italic">Esc</em></span><span class="No-Break"> keys.</span></p>
<p class="callout">Once you know which key press you need, reboot your computer, and repeatedly press that key during the booting process. The booting process should pause, and the BIOS or UEFI menu should load for you. Use the arrow keys on your keyboard to navigate through the sections, looking for either a <strong class="bold">CPU Configuration</strong> or <strong class="bold">Advanced Settings</strong> field. You can also search before the reboot to get precise instructions from your device’s manufacturer about how to negotiate <span class="No-Break">this process.</span></p>
<p class="callout">Within <strong class="bold">CPU Configuration</strong> or <strong class="bold">Advanced Settings</strong>, look for any option that mentions <strong class="source-inline">Virtualization</strong>, <strong class="source-inline">VT-x</strong>, <strong class="source-inline">AMD-V</strong>, <strong class="source-inline">Intel Virtualization Technology</strong>, or a similar term. You can also look for these terms under the <strong class="bold">Processor</strong>, <strong class="bold">Security</strong>, and <strong class="bold">System Configuration</strong> submenus. You can enable or disable virtualization once you find and select the field by pressing the <em class="italic">+</em> or <em class="italic">–</em> keys, or sometimes just pressing <em class="italic">Enter</em> when the field is selected. Once done, make sure you save your settings – press the <em class="italic">F10</em> key, or highlight the save button and press <em class="italic">Enter</em>. Then, exit the BIOS or UEFI screen and allow your device to reboot again. Virtualization should now <span class="No-Break">be enabled.</span></p>
<p>Much like we did with the Kali Purple download, we are going to first point our browsers to the appropriate download location and grab the checksum, the hash value, that we will later compare to the hash value of the downloaded executable, ensuring that it downloaded <a id="_idIndexMarker347"/>safely with no compromises to <span class="No-Break">its integrity.</span></p>
<p>To do that, go to <a href="https://www.virtualbox.org/wiki/Downloads">https://www.virtualbox.org/wiki/Downloads</a> in your browser. When you reach the VirtualBox site, you will see a variety of options to download VirtualBox, as shown within the purple box in <span class="No-Break"><em class="italic">Figure 3</em></span><em class="italic">.5</em>. We will walk you through the process, covering any differences between Windows, macOS, and Linux. You can also see two options to acquire the checksum in either the SHA-256 or MD5 hash value. Because it is significantly more secure, we will work with the SHA-256 hash value that you see highlighted in red in <span class="No-Break"><em class="italic">Figure 3</em></span><span class="No-Break"><em class="italic">.5</em></span><span class="No-Break">:</span></p>
<p>VirtualBox offers downloads for Windows, macOS, <span class="No-Break">and Linux:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer031">
<img alt="Figure 3.5 – VirtualBox downloads and checksums" height="782" src="image/B21223_03_5.jpg" width="1286"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.5 – VirtualBox downloads and checksums</p>
<p>Select the <strong class="bold">SHA256 checksums</strong> link to get a list of potential hash values, depending on the package that you intend to download. While we will cover downloading and installing the <a id="_idIndexMarker348"/>latest stable release for each of Windows, macOS, and Linux, we will use Windows in this demonstration to grab the necessary screenshot visuals to include. One of the original core appeals of VMs was giving Windows users the ability to run a Linux instance within the Windows host environment. Your scenario may be different. That’s okay! We will provide examples for each of the big three operating <span class="No-Break">systems’ users.</span></p>
<p>Find the hash value corresponding to your download and record <span class="No-Break">it somewhere:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer032">
<img alt="Figure 3.6 – VirtualBox hash values" height="549" src="image/B21223_03_6.jpg" width="1300"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.6 – VirtualBox hash values</p>
<p>Once you have recorded your hash value, return to the main page, and find the appropriate VirtualBox package based on your operating system. It will be one of the links shown <a id="_idIndexMarker349"/>within the box highlighted in <span class="No-Break"><em class="italic">Figure 3</em></span><em class="italic">.5</em>. Select your product, and click on it to begin the download. Depending on the system and browser you use, you might see a progress tracker, such as the Firefox browser download tracker shown in <span class="No-Break"><em class="italic">Figure 3</em></span><span class="No-Break"><em class="italic">.7</em></span><span class="No-Break">:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer033">
<img alt="Figure 3.7 – The Firefox browser’s download progress" height="83" src="image/B21223_03_7.jpg" width="545"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.7 – The Firefox browser’s download progress</p>
<p>This bar lets you know the status of the download and when it’s completed. If it doesn’t automatically appear, you can usually manually invoke it by looking at the top right of your browser for the international symbol representing a download. This symbol is characterized by a downward-pointing arrow with a straight horizontal line underneath it. If there isn’t a download symbol, you might find three horizontal dots, as is the case with Microsoft’s Edge browser, and if you click on those, a menu will appear showing the download symbol with the word <strong class="bold">Downloads</strong> after it. Alternatively, you can simply wait a few minutes and then navigate to the <strong class="bold">Downloads</strong> folder, as we discussed in the previous section, to look for the VirtualBox executable. That’s not such a bad idea, since you will want to go there anyway to grab the hash of the file after <span class="No-Break">downloading completes.</span></p>
<p>Once you <a id="_idIndexMarker350"/>are confident that VirtualBox – or other virtualization software for you rebels out there – has completed downloading, you will want to verify the hash of the download matches the one you recorded from <span class="No-Break">the website.</span></p>
<p class="callout-heading">Note</p>
<p class="callout">It is imperative that you do not allow yourself to be tempted to skip the step of comparing and verifying the hash values of this or any other part of the Kali Purple download and installation process. Remember that you are about to install and configure a very robust suite of security software featuring very <span class="No-Break">powerful tools.</span></p>
<p class="callout">The last thing you want is to learn that someone along the way was able to hijack your download and replace it with a clone that has a backdoor built into it, where they can use the powerful tools of your system to commit cybercrime, leaving any evidence trails pointing to you! Comparing the hash values prevents this from occurring. If a single bit of information is changed in the package, the hash values will <span class="No-Break">not match.</span></p>
<p class="callout">However, this doesn’t mean that if your hash values don’t match someone is targeting you. There are many reasons why the final downloaded product doesn’t match the original. There could simply have been a hiccup within the internet connection somewhere along the way that, somehow, corrupted the data <span class="No-Break">being transferred.</span></p>
<p class="callout">That’s another reason to check the hash values. If you try to install corrupt software, anything could happen. Sure, it could not work at all. It also could mostly function, but you might find out much later after you’ve put extraordinary effort into configuring your software that a crucial feature doesn’t work. You don’t want the headache of trying to figure that <span class="No-Break">problem out.</span></p>
<h2 id="_idParaDest-61"><a id="_idTextAnchor063"/>Windows users</h2>
<p>Let’s <a id="_idIndexMarker351"/>look at the first method <span class="No-Break">for Windows:</span></p>
<ol>
<li>Open a <strong class="source-inline">cmd</strong> <span class="No-Break">terminal window.</span></li>
<li>Type <span class="No-Break"><strong class="source-inline">cd %USERPROFILE%\Downloads</strong></span><span class="No-Break">.</span></li>
<li>Type <strong class="source-inline">dir</strong> and look for the VirtualBox file <span class="No-Break">you downloaded.</span></li>
<li>Type <strong class="source-inline">CertUtil -hashfile &lt;</strong><span class="No-Break"><strong class="source-inline">filename&gt; SHA256</strong></span><span class="No-Break">.</span></li>
<li>Compare the result with the hash value you recorded before <span class="No-Break">downloading VirtualBox.</span></li>
</ol>
<p>Now, let’s <a id="_idIndexMarker352"/>look at the second method <span class="No-Break">for Windows:</span></p>
<ol>
<li>Open a PowerShell <span class="No-Break">terminal window.</span></li>
<li>Type <span class="No-Break"><strong class="source-inline">cd $HOME\Downloads</strong></span><span class="No-Break">.</span></li>
<li>Type <strong class="source-inline">dir</strong> and look for the VirtualBox file <span class="No-Break">you downloaded.</span></li>
<li>Type <strong class="source-inline">Get-FileHash -Algorithm SHA256 -</strong><span class="No-Break"><strong class="source-inline">Path &lt;filename&gt;</strong></span><span class="No-Break">.</span></li>
</ol>
<p>Alternatively, follow <span class="No-Break">these steps:</span></p>
<ol>
<li>Open a PowerShell <span class="No-Break">terminal window.</span></li>
<li>Type <strong class="source-inline">Get-FileHash -Algorithm SHA256 -</strong><span class="No-Break"><strong class="source-inline">Path C:\Users\username\Downloads\&lt;filename&gt;</strong></span><span class="No-Break">.</span></li>
<li>Compare the result with the hash value you recorded before <span class="No-Break">downloading VirtualBox.</span></li>
</ol>
<h2 id="_idParaDest-62"><a id="_idTextAnchor064"/>macOS users</h2>
<p>Let’s <a id="_idIndexMarker353"/>look at the steps <span class="No-Break">for macOS:</span></p>
<ol>
<li>Open a <span class="No-Break">terminal window.</span></li>
<li>Type <span class="No-Break"><strong class="source-inline">cd ~/Downloads</strong></span><span class="No-Break">.</span></li>
<li>Verify that you’re in the <span class="No-Break">correct place:</span><ol><li class="upper-roman">Type <strong class="source-inline">pwd</strong> and look for the <strong class="source-inline">/Users/username/Downloads</strong> <span class="No-Break">file path.</span></li><li class="upper-roman">Type <strong class="source-inline">ls</strong> and look for the VirtualBox file <span class="No-Break">you downloaded.</span></li></ol></li>
<li>Type <strong class="source-inline">shasum -a </strong><span class="No-Break"><strong class="source-inline">256 &lt;filename&gt;</strong></span><span class="No-Break">.</span></li>
<li>Compare <a id="_idIndexMarker354"/>the result with the hash value you recorded before <span class="No-Break">downloading VirtualBox.</span></li>
</ol>
<h2 id="_idParaDest-63"><a id="_idTextAnchor065"/>Linux users</h2>
<p>Let’s <a id="_idIndexMarker355"/>look at the steps <span class="No-Break">for Linux:</span></p>
<ol>
<li>Open a <span class="No-Break">terminal window.</span></li>
<li>Type <strong class="source-inline">Bash</strong> to open the <span class="No-Break">command shell.</span></li>
<li>Type <span class="No-Break"><strong class="source-inline">cd ~/Downloads</strong></span><span class="No-Break">.</span></li>
<li>Verify that you’re in the <span class="No-Break">correct place:</span><ol><li class="upper-roman">Type <strong class="source-inline">pwd</strong> and look for the <strong class="source-inline">/home/username/Downloads</strong> <span class="No-Break">file path.</span></li><li class="upper-roman">Type <strong class="source-inline">ls</strong> and look for the VirtualBox file <span class="No-Break">you downloaded.</span></li></ol></li>
<li>Type <strong class="source-inline">sha256sum &lt;filename&gt;</strong> file path <span class="No-Break">to be</span></li>
<li>Compare the result with the hash value you recorded before <span class="No-Break">downloading VirtualBox.</span></li>
</ol>
<p>Now that we’ve verified the integrity of the VirtualBox installer, let’s install it! It is generally going to be the same process, no matter which operating system you use, with just a few subtleties in the downloading process, which we just covered alongside invoking the installation. After that, it’s all the same across <span class="No-Break">the board.</span></p>
<h2 id="_idParaDest-64"><a id="_idTextAnchor066"/>Linux VirtualBox installation</h2>
<p>You’ve <a id="_idIndexMarker356"/>already researched and confirmed the appropriate download for your specific flavor of Linux. Now, you’ll want to go back into the command line via Bash and <strong class="source-inline">cd</strong> your way into the downloads folder, just as you did when you verified the hash value. If you’re using Linux for this process, odds are that you already know that files need to have execute permissions assigned to them before we can actually invoke – that is, <em class="italic">execute</em> – them. Since we’re already in the <strong class="source-inline">Downloads</strong> folder, we can set these permissions by typing <strong class="source-inline">chmod +x &lt;filename&gt;</strong> and then invoking the package in one of the <span class="No-Break">following ways:</span></p>
<ul>
<li><strong class="bold">Debian/Ubuntu Linux</strong>: Type <span class="No-Break"><strong class="source-inline">sudo ./&lt;filename&gt;</strong></span></li>
<li><strong class="bold">CentOS/Fedora Linux</strong>: Type <strong class="source-inline">sudo dnf install ./&lt;filename&gt;</strong> or <strong class="source-inline">sudo yum </strong><span class="No-Break"><strong class="source-inline">install ./&lt;filename&gt;</strong></span></li>
<li><strong class="bold">Default</strong>: Type <strong class="source-inline">sudo apt </strong><span class="No-Break"><strong class="source-inline">install ./&lt;filename&gt;</strong></span></li>
</ul>
<p><strong class="bold">Chmod</strong> stands for <strong class="bold">change mode</strong>, which <a id="_idIndexMarker357"/>is a direct reference <a id="_idIndexMarker358"/>to changing the mode of the file permissions. <strong class="bold">Sudo</strong> stands for <strong class="bold">superuser do</strong>, which is more or less like saying, <em class="italic">“Do this as if I’m an admin giving you </em><span class="No-Break"><em class="italic">an instruction.”</em></span></p>
<p>The <a id="_idIndexMarker359"/>command shell will show a long scroll of files unpacking <span class="No-Break">and installing:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer034">
<img alt="Figure 3.8 – The Linux VirtualBox installation" height="320" src="image/B21223_03_8.jpg" width="1022"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.8 – The Linux VirtualBox installation</p>
<p>Let’s move on to the macOS <span class="No-Break">VirtualBox installation.</span></p>
<h2 id="_idParaDest-65"><a id="_idTextAnchor067"/>macOS VirtualBox installation</h2>
<p>After <a id="_idIndexMarker360"/>confirming your file hash value in macOS, it is easy to execute it – even more so than Linux! Since you’re already in the <strong class="source-inline">Downloads</strong> folder, you can simply type the file’s name and press <em class="italic">Enter</em> to invoke the installer. If you are no longer in the <strong class="source-inline">Downloads</strong> folder, you can still execute the file by simply typing <strong class="source-inline">&lt;filepath&gt;/&lt;filename&gt;</strong> and pressing <em class="italic">Enter</em>. If you’re a visual person and prefer to invoke the installer graphically, you can type <strong class="source-inline">Command + Shift + L</strong> to directly open your <strong class="bold">downloads</strong> folder and simply click on the file to <span class="No-Break">invoke it.</span></p>
<p>Alternatively, you <a id="_idIndexMarker361"/>can take the <span class="No-Break">following steps:</span></p>
<ol>
<li>Open a new <span class="No-Break">Finder window.</span></li>
<li>Click on <strong class="bold">Downloads</strong> under <strong class="bold">Favorites</strong> in the <span class="No-Break">left sidebar.</span></li>
<li>View and click your installer file to <span class="No-Break">invoke it.</span></li>
</ol>
<p>Let’s move on to the Windows <span class="No-Break">VirtualBox installation.</span></p>
<h2 id="_idParaDest-66"><a id="_idTextAnchor068"/>Windows VirtualBox installation</h2>
<p>Because installing VirtualBox is a near-identical process regardless of which operating system <a id="_idIndexMarker362"/>you’re using, and because one of the more common uses for putting Linux within a VM is running it within a Windows host, we will focus the rest of our walk-through in <span class="No-Break">that form.</span></p>
<p>To start, open File Explorer either by clicking on the icon in your taskbar if it’s there,  typing <strong class="source-inline">file explorer</strong> into the search field of your taskbar, or clicking on <strong class="bold">Start</strong> and typing <strong class="source-inline">file explorer</strong> in the <strong class="bold">Start</strong> search field. No matter how you do it, it will show up, and you should click on it, examining the left pane for the <strong class="source-inline">Downloads</strong> folder. Find your VirtualBox installer file and double-click to <span class="No-Break">invoke it.</span></p>
<p>You’ll likely receive a pop-up box asking you whether you want to allow this program to make changes on your device. While that may sound scary and risky to you, it’s necessary. VirtualBox cannot install itself and function properly if you do not allow it to make changes on your device. Therefore, select and <span class="No-Break">click </span><span class="No-Break"><strong class="bold">Yes</strong></span><span class="No-Break">.</span></p>
<p>The <strong class="bold">installation wizard</strong> will appear after you give permission for it to make changes to <span class="No-Break">your device:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer035">
<img alt="Figure 3.9 – The Oracle VirtualBox installation wizard" height="590" src="image/B21223_03_9.jpg" width="750"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.9 – The Oracle VirtualBox installation wizard</p>
<p>Depending <a id="_idIndexMarker363"/>on when you read this, the pop-up box introducing you to the installation wizard may show a different numbered version of VirtualBox. That’s indicative of an updated version, and that’s okay! The installation should work exactly the same. Select <strong class="bold">Next &gt;</strong> to be presented with options for a custom setup. For training and learning purposes, we are going to accept the default recommendations. Select <span class="No-Break"><strong class="bold">Next &gt;</strong></span><span class="No-Break">.</span></p>
<p>Custom installation options are available for <span class="No-Break">experienced users:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer036">
<img alt="Figure 3.10 – VirtualBox’s customized installation options menu" height="481" src="image/B21223_03_10.jpg" width="614"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.10 – VirtualBox’s customized installation options menu</p>
<p>You may <a id="_idIndexMarker364"/>be presented with one of the warnings shown in <span class="No-Break"><em class="italic">Figure 3</em></span><em class="italic">.11</em>, or even both of them. If so, remember that they are warnings, not errors. They are common warnings, and there’s no cause <span class="No-Break">for concern.</span></p>
<p>The <strong class="bold">Network Interfaces</strong> warning means that the VirtualBox installer has detected a potential conflict related to your physical network communications hardware. This warning is <a id="_idIndexMarker365"/>triggered if the installer detects that there is an existing <a id="_idIndexMarker366"/>application that uses the same <strong class="bold">Internet Protocol</strong> (<strong class="bold">IP</strong>) or <strong class="bold">Media Access Control</strong> (<strong class="bold">MAC</strong>) address that VirtualBox intends to use. In nearly all instances, this will most likely be another type of <span class="No-Break">virtualization software.</span></p>
<p>While it is important to resolve these issues, that does not necessarily mean you need to delete or uninstall the software. You’ll simply need to ensure it is disabled and does not run at the same time you are using VirtualBox. To continue the installation, you will want to <a id="_idIndexMarker367"/>make sure any present online sessions, VMs, or <strong class="bold">Virtual Private Networks</strong> (<strong class="bold">VPNs</strong>) are disconnected. Make sure you grab your login credentials for any of these services and record them somewhere, since most of these services are configured to auto-run and auto-login. Folks tend to just simply forget their credentials with <span class="No-Break">such things.</span></p>
<p>The <strong class="bold">Missing Dependencies Python Core</strong> error means that VirtualBox is unable to locate the Python interpreter on your system. VirtualBox depends upon Python to negotiate quite a few tasks, such as running scripts, managing VM configurations, and interacting <a id="_idIndexMarker368"/>with the VirtualBox <strong class="bold">Application Programming Interface</strong> (<strong class="bold">API</strong>). To resolve this error, we will need to first verify whether Python is installed on your system and, if not, download it. Then, we will need to ensure that the Python executable is included in your system’s <strong class="source-inline">PATH</strong> environment variable. Because modifying this PATH variable usually requires a complete reboot of your system, we will include these instructions at the end of this section so that you <a id="_idIndexMarker369"/>can continue with the VirtualBox installation <span class="No-Break">without interruption.</span></p>
<p>It is okay to click through these errors as long as you remember to address them before <span class="No-Break">running VirtualBox:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer037">
<img alt="Figure 3.11 – Common VirtualBox installation errors" height="483" src="image/B21223_03_11.jpg" width="611"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.11 – Common VirtualBox installation errors</p>
<p>To resolve this error, first look at the default location of where Python would be installed on your system if it were installed in the <span class="No-Break">default location.</span></p>
<p>In Windows, open <strong class="bold">File Explorer</strong> like you did to find the VirtualBox installer, but instead of going to the <strong class="source-inline">Downloads</strong> folder, you’ll want to look for <strong class="source-inline">C:\Python&lt;version&gt;</strong>, where <strong class="source-inline">&lt;version&gt;</strong> represents a number such as <strong class="source-inline">3.9</strong>. This indicates the version of Python that is installed. If you do not see a Python folder, simply type <strong class="source-inline">Python</strong> in the search bar, or go to the <strong class="bold">Start</strong> menu and type <strong class="source-inline">Python</strong> in that search bar. Autocomplete should let you know whether Python <span class="No-Break">is installed.</span></p>
<p>For macOS, navigate to the <strong class="source-inline">/Library/Frameworks/Python.framework/Versions/&lt;version&gt;/bin</strong> location – again, <strong class="source-inline">&lt;version&gt;</strong> references a numerical value. If no file is found, you can either click on the magnifying glass in the top-right corner of the menu bar or press <em class="italic">Command</em> + <em class="italic">Spacebar</em> to open the Spotlight application. Type <strong class="source-inline">Python</strong> in the search field <span class="No-Break">that appears.</span></p>
<p>In Linux, you’re <a id="_idIndexMarker370"/>likely to find a Python installation at <strong class="source-inline">/usr/bin/python </strong><span class="No-Break"><strong class="source-inline">or /usr/local/bin/python</strong></span><span class="No-Break">.</span></p>
<p>For both macOS and Linux, you can also open a command Terminal and type <strong class="source-inline">find / -name Python* -print</strong>, with the asterisk representing a wildcard. This searches for any file that starts with Python and includes anything with any value <span class="No-Break">after it:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer038">
<img alt="Figure 3.12 – The latest Python version" height="189" src="image/B21223_03_12.jpg" width="276"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.12 – The latest Python version</p>
<p>If Python is not found on your system, you will need to download it. Open a browser window, go to <a href="https://www.python.org/">https://www.python.org/</a>, and then scroll down until you see the <strong class="bold">Download</strong> section. Select the latest version to be taken to the download page. On the next page, scroll to the bottom and find the operating system version you need before recording the corresponding MD5 hash value. Then, download and install the product to the default locations listed earlier. Verify the hash values as you did with Kali Purple and VirtualBox, continuing the process until Python is fully installed. You may need to abort the VirtualBox installation and reboot during <span class="No-Break">this process.</span></p>
<p>Find your hash value, record it, and then download and install Python as you did with Kali Purple <span class="No-Break">and VirtualBox:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer039">
<img alt="Figure 3.13 – The Python operating system download options" height="524" src="image/B21223_03_13.jpg" width="1451"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.13 – The Python operating system download options</p>
<p>Once you have identified the file path of your Python executable, either by finding it on your system <a id="_idIndexMarker371"/>or downloading it anew, you will then need to modify the PATH environment variable. If you had to download Python, the download offers an option to automatically set the PATH variable for you! Go back and review the steps after downloading and rebooting to verify whether that has been done. If, for some reason, the automatic PATH addition was not taken care of, proceed with the following instructions to take care <span class="No-Break">of that.</span></p>
<h2 id="_idParaDest-67"><a id="_idTextAnchor069"/>Setting the environment PATH variable in Windows</h2>
<p>Depending on your operating system version, some of these items may not be displayed exactly <a id="_idIndexMarker372"/>as described here. Rest assured that they are still there. You might have to search around your display screen. The order of events is <span class="No-Break">the same:</span></p>
<ol>
<li>On the <strong class="bold">Start</strong> menu, right-click on <strong class="bold">Computer</strong> | <strong class="bold">This PC</strong> or <strong class="bold">System</strong> and <span class="No-Break">select </span><span class="No-Break"><strong class="bold">Properties</strong></span><span class="No-Break">.</span></li>
<li>Click on <strong class="bold">Advanced system settings</strong> on the left side or under <span class="No-Break"><strong class="bold">Device Specifications</strong></span><span class="No-Break">.</span></li>
<li>Select <a id="_idIndexMarker373"/>the <strong class="bold">Advanced</strong> tab and click on <span class="No-Break"><strong class="bold">Environment Variables</strong></span><span class="No-Break">.</span></li>
<li>Under <strong class="bold">System variables</strong>, select <strong class="bold">Path</strong>, and then <span class="No-Break">click </span><span class="No-Break"><strong class="bold">Edit</strong></span><span class="No-Break">.</span></li>
<li>Select <strong class="bold">New</strong>, and then add the path to your <span class="No-Break">Python executable.</span></li>
<li>Click <strong class="bold">OK</strong>, and then reboot <span class="No-Break">your system.</span></li>
<li>Return to your <span class="No-Break">VirtualBox installation.</span></li>
</ol>
<h2 id="_idParaDest-68"><a id="_idTextAnchor070"/>Setting the environment PATH variable in macOS or Linux</h2>
<p>macOS <a id="_idIndexMarker374"/>and Linux <a id="_idIndexMarker375"/>typically share the following set of instructions to set the <span class="No-Break">environment variable:</span></p>
<ol>
<li>Open a terminal window and invoke Bash <span class="No-Break">or Zsh.</span></li>
<li>Type <strong class="source-inline">~/.bashrc</strong> if you’re using Bash or <strong class="source-inline">~/.zshrc</strong> if you’re using Zsh to open the <span class="No-Break">config file.</span></li>
<li>Look for the <strong class="source-inline">PATH</strong> environment variable – it starts with <strong class="source-inline">export PATH= –</strong> and add <span class="No-Break">a colon.</span></li>
<li>Add a space and then the path to the Python executable (<strong class="source-inline">/path/to/python</strong>) after <span class="No-Break">the colon.</span></li>
<li>Save the file and exit the <span class="No-Break">text editor.</span></li>
<li>Type <strong class="source-inline">source &lt;configuration_file&gt;</strong> to apply the changes to your current <span class="No-Break">terminal session.</span></li>
<li>Reboot your system for the changes to <span class="No-Break">take effect.</span></li>
<li>Return to your <span class="No-Break">VirtualBox installation.</span></li>
</ol>
<p>Now that we have eliminated potential communication conflicts, installed Python on our system, and pointed our environment PATH variables, we can return to the VirtualBox installation and restart the process. After passing the customized setup window, we are now presented with the final option. Just squeeze the trigger by clicking the <strong class="bold">Install</strong> button for the installation wizard to begin deploying its magic and start the installation, as shown in <span class="No-Break"><em class="italic">Figure 3</em></span><em class="italic">.14</em>. Once the installation is complete, make sure the <strong class="bold">Start Oracle VM VirtualBox &lt;edition number&gt; after installation</strong> box is checked. Then, select <strong class="bold">Finish</strong> to do <span class="No-Break">just that:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer040">
<img alt="Figure 3.14 – Begin and finish the mechanical process of installing VirtualBox" height="482" src="image/B21223_03_14.jpg" width="612"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.14 – Begin and finish the mechanical process of installing VirtualBox</p>
<p>Once <a id="_idIndexMarker376"/>VirtualBox is installed, we need to run it so that we can establish a specific VM for our Kali Purple instance. First, let’s record the total amount of RAM, disk space, and process cores <a id="_idIndexMarker377"/>on our device. In Windows, type <strong class="source-inline">msinfo32</strong> in the search bar and select <strong class="bold">System Information</strong>. In macOS, click on the Apple menu in the top-left corner of your desktop. Select <strong class="bold">About This Mac</strong> from the drop-down menu. Navigate across the tabs to glean the information you need. As usual, Linux has a fun way of doing things. Simply open a Terminal Window and type <strong class="source-inline">hwinfo</strong> for RAM, storage, and CPU information. You can also type <strong class="source-inline">df -h</strong> for detailed storage information, <strong class="source-inline">free -h</strong> for detailed RAM information, and <strong class="source-inline">lscpu</strong> for detailed <span class="No-Break">CPU information.</span></p>
<p>Once you have your data collected, launch VirtualBox the same as you would launch any other application on your device. To add a new VM, we will click on the <strong class="bold">New</strong> button. Do not click on the <strong class="bold">Add</strong> button, unless you already have a VM on your machine with a <strong class="source-inline">.vbox</strong> filename extension that was created by a previous VirtualBox installation or other virtualization software. We are starting anew. So, we will click the <span class="No-Break"><strong class="bold">New</strong></span><span class="No-Break"> button.</span></p>
<p>Select <a id="_idIndexMarker378"/>the <strong class="bold">New</strong> button <a id="_idIndexMarker379"/>to create a new VM or the <strong class="bold">Add</strong> button to include an <span class="No-Break">existing one:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer041">
<img alt="Figure 3.15 – The VirtualBox lobby screen" height="90" src="image/B21223_03_15.jpg" width="315"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.15 – The VirtualBox lobby screen</p>
<p>On the <strong class="bold">Create Virtual Machine</strong> window, type a name for your VM, and use the drop-down arrow to select the path of the Kali Purple <strong class="source-inline">.iso</strong> file that you downloaded at the beginning of this chapter. Select <strong class="bold">Next</strong> when you are finished. The action items are highlighted in <span class="No-Break"><em class="italic">Figure 3</em></span><span class="No-Break"><em class="italic">.16</em></span><span class="No-Break">:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer042">
<img alt="Figure 3.16 – Creating new VM action items" height="426" src="image/B21223_03_16.jpg" width="766"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.16 – Creating new VM action items</p>
<p>Keeping in mind the values you recorded earlier, determine the amount of RAM, number of processors, and disk storage you want reserved for this VM. Understand that your <a id="_idIndexMarker380"/>host device <a id="_idIndexMarker381"/>will still need some of these resources to do its job. So, selecting the maximum amount that you recorded is likely to cause significant performance issues and/or Kali Purple installation errors. At a minimum, choose 2 GB of RAM, 1 processor, and 20 GB of disk storage. When finished, select <strong class="bold">Next</strong> after <span class="No-Break">each screen.</span></p>
<p>Allocate enough but not too many resources, based on the numbers you recorded from <span class="No-Break">your device:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer043">
<img alt="Figure 3.17 – Allocating resources for the new VM" height="426" src="image/B21223_03_17.jpg" width="768"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.17 – Allocating resources for the new VM</p>
<p>VirtualBox will finalize the settings for your new VM and present a <strong class="bold">Summary</strong> screen for you to review, as shown in <span class="No-Break"><em class="italic">Figure 3</em></span><em class="italic">.18</em>. Make sure that the screen reflects the settings you chose, and then select <strong class="bold">Finish</strong> to return to the <span class="No-Break">lobby screen:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer044">
<img alt="Figure 3.18 – The VM summary screen presented for final user acceptance" height="428" src="image/B21223_03_18.jpg" width="769"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.18 – The VM summary screen presented for final user acceptance</p>
<p>Once <a id="_idIndexMarker382"/>we agree <a id="_idIndexMarker383"/>and accept the final details, the installer will finish its duties and return us to the VirtualBox lobby, where we will now see our newly created VM in the left column. Kali Purple is not yet installed. We named our VM <strong class="source-inline">Kali Purple</strong>, so we know that the operating system will load when we click the <strong class="bold">Start</strong> button after we first install <span class="No-Break">the OS:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer045">
<img alt="Figure 3.19 – The VM lobby screen showing the new VM available for use" height="187" src="image/B21223_03_19.jpg" width="897"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.19 – The VM lobby screen showing the new VM available for use</p>
<p>We <a id="_idIndexMarker384"/>will begin that <a id="_idIndexMarker385"/>shortly, in the <span class="No-Break">next section.</span></p>
<h1 id="_idParaDest-69"><a id="_idTextAnchor071"/>The installation of Kali Purple</h1>
<p>As we finalize preparing our technology for a full hands-on Kali Purple learning experience, we need to consider the full scope of our potential needs. You’ve already seen that <a id="_idIndexMarker386"/>there are Kali Linux versions available for Windows, Linux, and Mac. If you skipped ahead because you already had some of these installations, you should know that the Purple framework is also available as an option to add to an existing Kali Linux installation. For many of you reading this, that was <span class="No-Break">the case.</span></p>
<p>We used VirtualBox to install Kali Purple for every scenario to include within another Linux host OS, but what <a id="_idIndexMarker387"/>if the host OS itself is Kali Linux? This is known as a <strong class="bold">bare-metal installation</strong> in the world of computing, and a VM is not necessary in such a scenario. Now, you certainly can also install virtualization software and add a VM Kali installation on top of your current host if you’re looking to create a sort of sandbox type of environment to use Purple. However, if Kali is your underlying system and you feel comfortable with it, you can simply add Purple to the existing Kali <span class="No-Break">Linux host.</span></p>
<p>This is done by opening a Bash session within a command line and typing <strong class="source-inline">sudo apt-get install purple-protocol-plugins</strong>. By running that command, the <strong class="source-inline">apt-get</strong> package manager that is native to most Debian-based Linux systems, such as Kali, Ubuntu, and Mint, will install all the necessary packages and required plugins for Purple, thereby transforming your bare-metal OS into a full-fledged Kali <span class="No-Break">Purple environment.</span></p>
<p>For the rest <a id="_idIndexMarker388"/>of us mere mortals, we will proceed to install Kali Purple through the VirtualBox VM we just created in the previous section. If you still don’t have the VirtualBox instance from the previous section open, then launch the software the same as you would any other application and select the <strong class="bold">Start</strong> button (highlighted in <span class="No-Break"><em class="italic">Figure 3</em></span><em class="italic">.19</em>). When you do, you’ll briefly be greeted with a VirtualBox graphic and then taken to the Kali Linux installation screen you can see on the right of <span class="No-Break"><em class="italic">Figure 3</em></span><span class="No-Break"><em class="italic">.20</em></span><span class="No-Break">.</span></p>
<p>Use the arrow keys on your keyboard to select <strong class="bold">Graphical install</strong> and <span class="No-Break">press </span><span class="No-Break"><em class="italic">Enter</em></span><span class="No-Break">:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer046">
<img alt="Figure 3.20 – Launching the Kali Purple Linux installation" height="532" src="image/B21223_03_20.jpg" width="603"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.20 – Launching the Kali Purple Linux installation</p>
<p>Here, you must use the arrow keys on your keyboard to select <strong class="bold">Graphic Install</strong> because you are now inside of a VM, and clicking inside of it will prompt an informational warning, telling you that clicking inside the VM might cause it to capture the host mouse pointer and keyboard, thereby making them unavailable to the host machine. You can see in the top right of <span class="No-Break"><em class="italic">Figure 3</em></span><em class="italic">.20</em> that our keyboard was auto-captured. That’s perfect. It allows you to use your arrow keys and press <em class="italic">Enter</em> to begin the graphical installation, and that’s what you should do <span class="No-Break">right now.</span></p>
<p>You may get a mount warning like the one shown in <span class="No-Break"><em class="italic">Figure 3</em></span><em class="italic">.21</em>. If you receive this warning, make sure <a id="_idIndexMarker389"/>all your hardware and drivers are up to date. You should not need to stop your installation. In fact, sometimes, the installation itself will resolve errors like this before all is said and done. However, once it is complete, you’ll want to make sure that your <strong class="source-inline">/media</strong> directory exists by trying to find or navigate to it. If it doesn’t, then you can create it by simply typing <strong class="source-inline">sudo mkdir /media</strong>. This is a scenario where there are many different possibilities. Therefore, if one of those two actions does not resolve it, you’ll want to put on your analyst research hat and utilize your favorite search engine to help narrow down the problem. More likely than not, these warnings will not impede your ability to successfully operate Kali Purple because they are informational in nature and not <span class="No-Break">outright errors:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer047">
<img alt="Figure 3.21 – Launching the Kali Purple Linux installation" height="68" src="image/B21223_03_21.jpg" width="459"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.21 – Launching the Kali Purple Linux installation</p>
<p>The installation process will continue working behind the scenes until it pauses to grab customization input from you. First, it will ask you which language you prefer the installation to be in, and then it will ask you which country you are in to help narrow down the time zone, which will be further refined later. Note the semi-transparent overlay on the right column. You can simply resize your installation window to expand it enough for that to disappear, and then select <strong class="bold">Continue</strong> in the lower right of each screen after you make <span class="No-Break">your selection.</span></p>
<p>Select your default language and country for the installation to customize it to <span class="No-Break">your needs:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer048">
<img alt="Figure 3.22 – Launching the Kali Purple Linux installation" height="567" src="image/B21223_03_22.jpg" width="747"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.22 – Launching the Kali Purple Linux installation</p>
<p>The next screen <a id="_idIndexMarker390"/>will again ask you to identify your language, but if you pay close attention, you’ll see that, this time, it asks for the language you wish for your keyboard to be <span class="No-Break">configured in.</span></p>
<p>Select the keyboard language. Kali Purple provides status bars through each step of the <span class="No-Break">installation process:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer049">
<img alt="Figure 3.23 – The keyboard language and purple installation metrics" height="565" src="image/B21223_03_23.jpg" width="743"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.23 – The keyboard language and purple installation metrics</p>
<p>After making several mounts and installations, Kali Purple will then ask for your help in finalizing the configuration of the network. First, enter a hostname for your new system. Make sure that, when selecting a name, you keep it to 63 characters or fewer and use only alphanumeric characters, numbers 0 through 9, or a minus sign (which cannot be the first or last character). The minus sign is the only special character allowed. You cannot use <a id="_idIndexMarker391"/>underscores or empty white spaces. If you do not strictly adhere to this naming convention, the installer will throw an error and force to you continue selecting potential hostnames until the parameters are met. When finished, <span class="No-Break">click </span><span class="No-Break"><strong class="bold">Continue</strong></span><span class="No-Break">:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer050">
<img alt="Figure 3.24 – Selecting a hostname" height="567" src="image/B21223_03_24.jpg" width="743"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.24 – Selecting a hostname</p>
<p>The next step is to configure a domain name. This is not the same as the hostname. The hostname identifies your specific device when represented from a Kali Linux perspective. This step is entirely optional, and its purpose is to help support further recognition of the system on your network or by a <strong class="bold">Domain Name System</strong> (<strong class="bold">DNS</strong>) server. We don’t have plans for that in <em class="italic">Introduction to Kali Purple</em>, so you can either leave it blank or <a id="_idIndexMarker392"/>enter a random value such as <strong class="source-inline">.purple</strong>, and then <span class="No-Break">click </span><span class="No-Break"><strong class="bold">Continue</strong></span><span class="No-Break">:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer051">
<img alt="Figure 3.25 – Selecting a domain name" height="514" src="image/B21223_03_25.jpg" width="913"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.25 – Selecting a domain name</p>
<p>The next two screens will ask for your name and username. The first screen asks for your real name, which will be used for any activity where your identity will be displayed. The second screen asks for a username for your account. Because this installation is for training purposes and will not be used in a live commercial setting, we will just use the author’s first and last name, all in lowercase, with no white space for each instance. Select <strong class="bold">Continue</strong> after <span class="No-Break">each screen.</span></p>
<p>Set your real name for the system to display, and also pick a username for your <span class="No-Break">non-administrative account:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer052">
<img alt="Figure 3.26 – Establishing your real name and username" height="218" src="image/B21223_03_26.jpg" width="736"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.26 – Establishing your real name and username</p>
<p>Where there <a id="_idIndexMarker393"/>be usernames, there be passwords. Let’s set one up for our non-administrative account. Long passwords are the best natural combatant against auto-cracking password utilities. A password could be an entire phrase. For example, <strong class="source-inline">KarlLaneIsAnIncrediblyTerribleChef</strong> would be a fantastic password, which is hard to crack because of its length but easy to remember, were it not printed in this book. No complicated or special characters are needed. Another method is to concatenate – that is, to put together without adding – multiple terms, preferably three or more completely unrelated words, such as <strong class="source-inline">RockLasagnaPlastic</strong>. Then again, if you’ve ever tasted Karl’s lasagna you might think those three terms really are related and be tempted to buy him a Packt cookbook out of <span class="No-Break">sheer pity.</span></p>
<p>Since this is a training installation that is uninstalled and reinstalled over and over, testing for as many different conditions as possible that you might encounter, we’ve just kept our passwords relatively short, since the whole process is temporary anyway (only at our end; you should keep your installation). When you are satisfied with your password, <span class="No-Break">click </span><span class="No-Break"><strong class="bold">Continue</strong></span><span class="No-Break">.</span></p>
<p>Set a strong <a id="_idIndexMarker394"/>password for your <span class="No-Break">non-administrative account:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer053">
<img alt="Figure 3.27 – Setting and confirming a password" height="350" src="image/B21223_03_27.jpg" width="735"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.27 – Setting and confirming a password</p>
<p>A sample of time zones in or near the country you selected is available for you to set your VM’s clock, as shown in <span class="No-Break"><em class="italic">Figure 3</em></span><em class="italic">.28</em>. Click <strong class="bold">Continue</strong> to observe Kali Purple beginning to format your VM <span class="No-Break">disk space:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer054">
<img alt="Figure 3.28 – Select your time zone and observe Kali Purple formatting your VM drive" height="568" src="image/B21223_03_28.jpg" width="748"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.28 – Select your time zone and observe Kali Purple formatting your VM drive</p>
<p>To complete the disk partitioning portion of the process, the installer will ask you whether you want <a id="_idIndexMarker395"/>one of several guided partitioning options or whether you want to do it manually. You know your own level of technical acumen, but since this is an introduction to Kali Purple, we are going to stick with the <strong class="bold">Guided - use entire </strong><span class="No-Break"><strong class="bold">disk option</strong></span><span class="No-Break">.</span></p>
<p><em class="italic">Guided</em> simply means the installer will use a pre-defined standard partitioning scheme rather than having you, the user, configure it yourself. The <em class="italic">use entire disk</em> part is a reference to the disk as seen by the VM. So, in other words, it’s not the entire disk of your host device. Rather, it’s the entire disk that has been set aside for the VM. Depending on when you’re reading this and what version of the <strong class="source-inline">.iso</strong> file is the latest release, you may still be asked to manually select a partition style. Because we cannot predict the future, what you do is down to your comfort level of your own technical abilities. If you’re not much of an OS or hardware person and this isn’t your specialty, that’s quite alright! There are a lot of <em class="italic">techies</em> who aren’t into one area of tech or another. Simply open up your favorite search engine and search for <strong class="source-inline">Kali Purple &lt;your .iso version&gt; default partition style</strong>. You’ll find this community is more than willing to help others enjoy Kali Purple, and we all love to make sure people <a id="_idIndexMarker396"/>can easily set up <span class="No-Break">the product.</span></p>
<p><strong class="bold">LVM</strong> stands for <strong class="bold">logical volume management</strong>. This is a disk management technology that allows for greater flexibility and more advanced features than traditional disk partitions. Logical disk partitions, or volumes, can be resized and moved, which makes it easier to manage storage space in the future. These advanced disk partitioning strategies are outside the scope of this book and will not be needed. Click <strong class="bold">Continue</strong> when you are ready <span class="No-Break">to proceed:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer055">
<img alt="Figure 3.29 – Time zone selection and the installer formatting status bars" height="569" src="image/B21223_03_29.jpg" width="745"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.29 – Time zone selection and the installer formatting status bars</p>
<p>Now, it’s <a id="_idIndexMarker397"/>time to deal with the <strong class="bold">GRand Unified Bootloader</strong> (<strong class="bold">GRUB</strong>). This is the default boot loader used in many Linux distributions, including Kali. It’s been reported that this step does not appear in the <strong class="source-inline">2024.1</strong> <strong class="source-inline">.iso</strong> version. No worries if that’s the case; just continue to proceed through the rest of <a id="_idIndexMarker398"/>the installation process. The GRUB is responsible for loading the OS kernel – that is, the core, or engine – into memory and initializing the system during the bootstrap (commonly referred to as <span class="No-Break">booting) process.</span></p>
<p>When the <strong class="bold">Install the GRUB bootloader</strong> screen is first displayed, one of the things which comes up that might grab your attention is a warning in the second paragraph. It states that if your computer has another OS already installed and the installer has failed to detect it, continuing with this installation will make that OS temporarily unbootable. What’s important to consider here is that you’re operating from within a VM. So, as far as the GRUB bootloader installer is concerned, the host OS doesn’t exist. It’s only referencing what it can see, and it can only see what’s inside the VM. Your host machine will not be affected in any way. Therefore, it’s safe to proceed. Select the <strong class="bold">Yes</strong> radio button, and then click <strong class="bold">Continue</strong> to finish installing the GRUB <span class="No-Break">boot loader:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer056">
<img alt="Figure 3.30 – The GRUB boot loader installation" height="559" src="image/B21223_03_30.jpg" width="749"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.30 – The GRUB boot loader installation</p>
<p>The installer <a id="_idIndexMarker399"/>will ask you to confirm the location where you want the GRUB boot loader installed. It will provide you the option to manually enter a location or select the pre-determined VM drive. We don’t need to customize our location. So, select the option provided and click <strong class="bold">Continue</strong> to finish <span class="No-Break">the process:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer057">
<img alt="Figure 3.31 – The GRUB boot loader installation" height="564" src="image/B21223_03_31.jpg" width="751"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.31 – The GRUB boot loader installation</p>
<p>The installer <a id="_idIndexMarker400"/>should provide the status bar we’ve been seeing throughout this entire Kali Purple installation process, showing that GRUB is being put into place. When finished, you’ll get one final action item, asking you to remove any media, such as an external hard drive or USB drive, that you might have had VirtualBox grab the Kali Purple <strong class="source-inline">.iso</strong> file from. In this example, we just linked directly to the <strong class="source-inline">.iso</strong> file in the Windows <strong class="source-inline">Downloads</strong> folder. Once you’ve satisfied the requirement of removing any physical installation media, click <strong class="bold">Continue</strong> to boot into your new Kali Purple OS for the very <span class="No-Break">first time.</span></p>
<p>You may be asked at some point to select which software packages you’d like to include. We’d <a id="_idIndexMarker401"/>recommend selecting anything belonging to any of the core <strong class="bold">National Institute of Standards and Technology</strong> (<strong class="bold">NIST</strong>) domains, <em class="italic">Identify</em>, <em class="italic">Protect</em>, <em class="italic">Detect</em>, <em class="italic">Respond</em>, and <em class="italic">Recover</em>. There is a sixth NIST domain; it has been added to this software list only in February 2024 – <em class="italic">Govern</em> is meant more for senior management. We will learn a little about it in <a href="B21223_11.xhtml#_idTextAnchor183"><span class="No-Break"><em class="italic">Chapter 11</em></span></a><span class="No-Break">.</span></p>
<p>Observe the <a id="_idIndexMarker402"/>GRUB status bar, and select <strong class="bold">Continue</strong> when you’re ready to boot into the OS for the <span class="No-Break">first time:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer058">
<img alt="Figure 3.32 – The final action item of the Kali Purple installation process" height="562" src="image/B21223_03_32.jpg" width="756"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.32 – The final action item of the Kali Purple installation process</p>
<p>The installer will make one final run at some behind-the-scenes housekeeping and then send some signals to the installer that this installation is finished. Therefore, it should terminate its activity <a id="_idIndexMarker403"/>and send us directly to the Kali Purple <span class="No-Break">boot menu:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer059">
<img alt="Figure 3.33 – Some final housekeeping and the termination commands are sent" height="565" src="image/B21223_03_33.jpg" width="755"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.33 – Some final housekeeping and the termination commands are sent</p>
<p>Kali Linux will load a boot menu before asking you for the username and password you created earlier, as shown in <span class="No-Break"><em class="italic">Figure 3</em></span><em class="italic">.34</em>. Enter your username and password. Then, click <span class="No-Break"><strong class="bold">Log In</strong></span><span class="No-Break">:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer060">
<img alt="Figure 3.34 – The Kali Purple boot menu and login page" height="502" src="image/B21223_03_34.jpg" width="454"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.34 – The Kali Purple boot menu and login page</p>
<p>Now, the moment of truth. Drum <span class="No-Break">roll, please…</span></p>
<p>If you see <a id="_idIndexMarker404"/>this screen, you have arrived at the Kali Purple desktop and your installation <span class="No-Break">was successful:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer061">
<img alt="Figure 3.35 – The Kali Purple desktop" height="852" src="image/B21223_03_35.jpg" width="1500"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.35 – The Kali Purple desktop</p>
<p>So far, we have walked you through several application downloading and installation activities just to get to this point. We’ve presented those activities in the order that makes the most logical sense. For example, many of you likely would’ve already had Python installed, so it wouldn’t have made sense to have everybody do it upfront. It made sense to download the Kali Purple <strong class="source-inline">.iso</strong> file before VirtualBox, as part of the VirtualBox configuration requires already having a location for the <strong class="source-inline">.iso</strong> file so that it can configure a VM specifically for it. Then, the grand marshal herself – the installation and configuration of <span class="No-Break">Kali Purple.</span></p>
<p>However, we are <a id="_idIndexMarker405"/>not quite yet done downloading and configuring our technology for Purple. There is one more critical component to run a successful Purple instance, which is the Java SDK. The reason we have saved this item for last is that we don’t need it to install our VM or Kali Purple. However, it is heavily depended upon by many software applications, including those we will use inside the <span class="No-Break">Purple environment.</span></p>
<p>In the next section, we will work through acquiring and installing the Java language support for our new OS installation. We will work from within the Kali Purple environment for the rest of this book. From here on out, any downloads and installations will occur through Kali Purple. So, keep your non-administrative account <span class="No-Break">credentials handy.</span></p>
<h1 id="_idParaDest-70"><a id="_idTextAnchor072"/>The installation of the Java SDK</h1>
<p>This brings us to the final preparatory acquisition and installation. We will complete this process by <a id="_idIndexMarker406"/>downloading and installing the Java SDK. Sometimes, you will <a id="_idIndexMarker407"/>see this presented simply as the <strong class="bold">Java Development Kit</strong> (<strong class="bold">JDK</strong>). They are one and the same. Some applications in Kali Linux require <a id="_idIndexMarker408"/>the JDK to properly function, such as Burp Suite, Metasploit, and <strong class="bold">Zap Attack </strong><span class="No-Break"><strong class="bold">Proxy</strong></span><span class="No-Break"> (</span><span class="No-Break"><strong class="bold">ZAP</strong></span><span class="No-Break">).</span></p>
<p>If you aren’t still logged into Kali Purple from the previous section, go ahead and open your VirtualBox application, select the VM you created for Kali Purple, and click the <em class="italic">Start</em> button to boot up the OS. When prompted, enter your credentials and click <strong class="bold">Log In</strong>, and that should bring you back to the Purple desktop. Now that you are inside Kali Linux, the next step will be much easier for you. There is no need to navigate through this text, picking out only the portions that pertain to your host OS, unless you wish to download the JDK on your host. However, we are downloading it for Kali Purple, so we can make that entire maneuver from inside Kali Purple. Click the little black box near the top-left of <a id="_idIndexMarker409"/>your screen (highlighted by the square in <span class="No-Break"><em class="italic">Figure 3</em></span><em class="italic">.36</em>) to open <span class="No-Break">a terminal:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer062">
<img alt="Figure 3.36 – Opening a command terminal" height="778" src="image/B21223_03_36.jpg" width="1000"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.36 – Opening a command terminal</p>
<p>Once the terminal window opens, you will see a command prompt resembling the one in the preceding <a id="_idIndexMarker410"/>screenshot. We will use the <strong class="bold">Advanced Package Tool</strong> (<strong class="bold">APT</strong>) to download and install software packages from now on. This tool is remarkably powerful and efficient! For the most part, you will no longer need to manually check the hash values of your downloads. APT is designed to handle the authenticity and integrity of these packages for you. Indeed, it will automatically perform the file verification on your behalf. In fact, APT will take package verification a step further. It uses a variety of cryptographic signatures and hash checks to verify package integrity. Not only will it evaluate the checksums for you, but it will also verify <a id="_idIndexMarker411"/>package authenticity through something called <strong class="bold">GNU Privacy Guard</strong> (<strong class="bold">GPG</strong>) keys. All of this is done in the background by default each time you invoke the <span class="No-Break">APT command.</span></p>
<p>To install <a id="_idIndexMarker412"/>the JDK, follow <span class="No-Break">these steps:</span></p>
<ol>
<li>Type <strong class="source-inline">sudo </strong><span class="No-Break"><strong class="source-inline">apt update</strong></span><span class="No-Break">.</span></li>
<li>Enter the password you created earlier <span class="No-Break">if prompted.</span></li>
<li>Wait for the list of available updates to complete and the command prompt to become <span class="No-Break">visible again.</span></li>
<li>Type <strong class="source-inline">sudo apt upgrade</strong> to install <span class="No-Break">the updates.</span></li>
<li>Type <strong class="source-inline">Y</strong> or <strong class="source-inline">Yes</strong> <span class="No-Break">when prompted.</span></li>
<li>Type <strong class="source-inline">sudo apt </strong><span class="No-Break"><strong class="source-inline">install default-jdk</strong></span><span class="No-Break">.</span></li>
<li>Type <strong class="source-inline">Y</strong> or <strong class="source-inline">Yes</strong> <span class="No-Break">when prompted.</span></li>
<li>Wait for the download <span class="No-Break">to complete.</span></li>
<li>Type <strong class="source-inline">javac -version</strong> to confirm success and review <span class="No-Break">the results.</span></li>
</ol>
<p>That’s it! If the final command produces any results, that means your download and installation were a success, and it likely took mere seconds compared to how we did things at the beginning of <span class="No-Break">this chapter.</span></p>
<h1 id="_idParaDest-71"><a id="_idTextAnchor073"/>Summary</h1>
<p>Throughout this chapter, we prepared our host device and technology for an immersive Kali Purple experience. Along the way, we reviewed some of the most common errors users will experience when negotiating the complexities of assembling and installing all the moving parts needed for a Kali Purple instance to successfully run. We’ve honed our cybersecurity analyst skillset by providing solutions, as well as holistic nudges, to help accommodate those <span class="No-Break">ultra-rare situations.</span></p>
<p>Remember that being a true cybersecurity analyst means you will need to learn how to solve problems that are yet unknown. While we’ve covered some of the most common issues when setting up a Kali Purple environment, it’s impractical to cover all of them, as all of them are unknown! One of the most important skills an analyst needs to have is learning how to learn. Hopefully, you’ve gained some valuable insight in this chapter to help you feel some achievement in <span class="No-Break">that arena.</span></p>
<p>We’ll be taking these lessons into <a href="B21223_04.xhtml#_idTextAnchor076"><span class="No-Break"><em class="italic">Chapter 4</em></span></a>, where we will begin installing, configuring, and testing components of the ELK stack. We will lay the groundwork for the eventual SIEM toolset that we will build within our home-built <span class="No-Break">SOC environment.</span></p>
<h1 id="_idParaDest-72"><a id="_idTextAnchor074"/>Questions</h1>
<ol>
<li>What is a <span class="No-Break">hash value?</span><ol><li class="Alphabets">A breakfast dish involving corned beef and <span class="No-Break">diced potatoes</span></li><li class="Alphabets">A metric used to measure your feelings <span class="No-Break">of nausea</span></li><li class="Alphabets">A fixed length one-way mathematical <span class="No-Break">encryption result</span></li><li class="Alphabets">A variable length one-way mathematical <span class="No-Break">encryption result</span></li></ol></li>
<li>Why should we download the Kali Purple <strong class="source-inline">.iso</strong> file before <span class="No-Break">configuring VirtualBox?</span><ol><li class="Alphabets">VirtualBox is dependent upon Kali Purple <span class="No-Break">to run.</span></li><li class="Alphabets">VirtualBox can install Kali Purple immediately after configuring a <span class="No-Break">new VM.</span></li><li class="Alphabets">Once installed, VirtualBox will block all external downloads for <span class="No-Break">security purposes.</span></li></ol></li>
<li>The Java SDK is required by Kali Purple. True <span class="No-Break">or false?</span><ol><li class="Alphabets">True – it is an integral part of keeping the <span class="No-Break">OS functional.</span></li><li class="Alphabets">False – it is not required, but many applications within Kali Purple will not run properly <span class="No-Break">without it.</span></li><li class="Alphabets">True – it is not a necessary application, but the creators of Kali Purple wanted to offer it in case it might someday be <span class="No-Break">deemed necessary.</span></li><li class="Alphabets">False – it is not required, but every single application within Kali Purple needs it <span class="No-Break">to function.</span></li></ol></li>
<li>How much RAM, CPUs, and disk space should we allocate to any <span class="No-Break">new VM?</span><ol><li class="Alphabets">About 10% of the host machine’s <span class="No-Break">total values</span></li><li class="Alphabets">The entire amount of the host machine’s values; we need every amount of power and storage we <span class="No-Break">can get!</span></li><li class="Alphabets">The recommended values of the applications we intend to run, provided they do not exceed what’s reasonably available <span class="No-Break">to us</span></li><li class="Alphabets">The minimum specifications required for the applications we intend to run to preserve resources for future host <span class="No-Break">machine operations</span></li></ol></li>
<li>When using the APT, we no longer need to check hash values. True <span class="No-Break">or false?</span><ol><li class="Alphabets">Generally, this <span class="No-Break">is true.</span></li><li class="Alphabets">False – we always need to check <span class="No-Break">hash values.</span></li><li class="Alphabets">This is always <span class="No-Break">completely true.</span></li></ol></li>
<li>What’s the difference between selecting <strong class="bold">New</strong> versus <strong class="bold">Add</strong> on the <span class="No-Break">VM’s lobby?</span><ol><li class="Alphabets">Nothing – they are one and <span class="No-Break">the same.</span></li><li class="Alphabets"><strong class="bold">New</strong> creates a new VM while <strong class="bold">Add</strong> merges two or more <span class="No-Break">VMs together.</span></li><li class="Alphabets"><strong class="bold">Add</strong> will look for a <strong class="source-inline">.vBox</strong> file or other compatible file and establish a VM based <span class="No-Break">on it.</span></li><li class="Alphabets">They both create a new VM, but selecting <strong class="bold">New</strong> tells VirtualBox that you’re a new user and need a <span class="No-Break">tutorial walk-through.</span></li></ol></li>
</ol>
<h1 id="_idParaDest-73"><a id="_idTextAnchor075"/>Further reading</h1>
<ul>
<li><strong class="bold">Calculate hash </strong><span class="No-Break"><strong class="bold">values</strong></span><span class="No-Break">: </span><a href="https://www.fileformat.info/tool/hash.htm"><span class="No-Break">https://www.fileformat.info/tool/hash.htm</span></a></li>
<li><strong class="bold">Kali.org requirements </strong><span class="No-Break"><strong class="bold">data</strong></span><span class="No-Break">: </span><a href="https://www.kali.org/docs/installation/hard-disk-install/"><span class="No-Break">https://www.kali.org/docs/installation/hard-disk-install/</span></a></li>
<li><strong class="bold">Holland &amp; Knight Law Firm</strong> – <em class="italic">Forensic Hashing in Criminal and Civil </em><span class="No-Break"><em class="italic">Discovery</em></span><span class="No-Break">: </span><a href="https://www.hklaw.com/en/insights/publications/2022/05/forensic-hashing-in-criminal-and-civil-discovery"><span class="No-Break">https://www.hklaw.com/en/insights/publications/2022/05/forensic-hashing-in-criminal-and-civil-discovery</span></a></li>
<li><strong class="bold">FBI usage of hash values for the PIA, CVIP, and </strong><span class="No-Break"><strong class="bold">IINI</strong></span><span class="No-Break">: </span><a href="https://www.fbi.gov/how-we-can-help-you/more-fbi-services-and-information/freedom-of-information-privacy-act/department-of-justice-fbi-privacy-impact-assessments/cvip"><span class="No-Break">https://www.fbi.gov/how-we-can-help-you/more-fbi-services-and-information/freedom-of-information-privacy-act/department-of-justice-fbi-privacy-impact-assessments/cvip</span></a></li>
<li><strong class="bold">Free PowerShell training from Microsoft </strong><span class="No-Break"><strong class="bold">Corporation</strong></span><span class="No-Break">: </span><a href="https://learn.microsoft.com/en-us/training/modules/introduction-to-powershell/"><span class="No-Break">https://learn.microsoft.com/en-us/training/modules/introduction-to-powershell/</span></a></li>
</ul>
</div>
</div></body></html>